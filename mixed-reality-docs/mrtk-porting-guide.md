---
title: アプリを HoloLens 2 で利用できるようにする
description: HoloLens (第 1 世代) または古い MRTK の既存アプリがあり、MRTK バージョン 2 および HoloLens 2 への移植を考えている開発者が対象です。
author: grbury
ms.author: grbury
ms.date: 04/12/19
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, テスト, MRTK, MRTK バージョン 2, HoloLens 2
ms.openlocfilehash: 02dabd21b7a6add2ce53fe291a447e49057184d0
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/05/2019
ms.locfileid: "66270394"
---
# <a name="getting-your-existing-app-ready-for-hololens-2"></a><span data-ttu-id="fc779-104">既存のアプリを HoloLens 2 で利用できるようにする</span><span class="sxs-lookup"><span data-stu-id="fc779-104">Getting your existing app ready for HoloLens 2</span></span>

<span data-ttu-id="fc779-105">このガイドは、HoloLens (第 1 世代) 用の既存 Unity アプリがある開発者が新しい HoloLens 2 デバイス用のアプリケーションに移植する際に特に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="fc779-105">This guide is specifically tailored to help developers who have an existing Unity app for HoloLens (1st gen) to port their application for the new HoloLens 2 device.</span></span> <span data-ttu-id="fc779-106">4 つの主要手順で、HoloLens (第 1 世代) の Unity アプリを HoloLens 2 に移植することができます。</span><span class="sxs-lookup"><span data-stu-id="fc779-106">There are four key steps to porting a HoloLens (1st gen) Unity app to HoloLens 2.</span></span> <span data-ttu-id="fc779-107">以下のセクションでは、各ステージについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="fc779-107">The sections below will detail information for each stage.</span></span> 

| <span data-ttu-id="fc779-108">手順 1</span><span class="sxs-lookup"><span data-stu-id="fc779-108">Step 1</span></span> | <span data-ttu-id="fc779-109">手順 2</span><span class="sxs-lookup"><span data-stu-id="fc779-109">Step 2</span></span> | <span data-ttu-id="fc779-110">手順 3</span><span class="sxs-lookup"><span data-stu-id="fc779-110">Step 3</span></span> | <span data-ttu-id="fc779-111">手順 4</span><span class="sxs-lookup"><span data-stu-id="fc779-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Visual Studio のロゴ](images/visualstudio_logo.png) | ![Unity のロゴ](images/unity_logo.png)| ![Unity のアイコン](images/hololens2_icon.jpg) | ![MRTK のロゴ](images/MRTKIcon.jpg) |
| <span data-ttu-id="fc779-116">最新のツールのダウンロード</span><span class="sxs-lookup"><span data-stu-id="fc779-116">Download latest tools</span></span> | <span data-ttu-id="fc779-117">Unity プロジェクトの更新</span><span class="sxs-lookup"><span data-stu-id="fc779-117">Update Unity Project</span></span> | <span data-ttu-id="fc779-118">ARM 用にコンパイル</span><span class="sxs-lookup"><span data-stu-id="fc779-118">Compile for ARM</span></span> | <span data-ttu-id="fc779-119">MRTK v2 に移行</span><span class="sxs-lookup"><span data-stu-id="fc779-119">Migrate to MRTK v2</span></span>

<span data-ttu-id="fc779-120">移植プロセスを開始する前に、開発者がソース管理を利用してアプリの元の状態のスナップショットを保存しておくことを**強くお勧めします**。</span><span class="sxs-lookup"><span data-stu-id="fc779-120">It is **highly recommended** that, before beginning the porting process, developers utilize source control to save a snapshot of the original state of their app.</span></span> <span data-ttu-id="fc779-121">さらに、プロセス中のさまざまな時点でチェックポイントの状態を*保存*することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="fc779-121">Additionally, it is recommended to *save* checkpoint states at various points during the process.</span></span> <span data-ttu-id="fc779-122">移植プロセスの中で、元のアプリの別の Unity インスタンスを並べて比較できるようにするのも非常に便利です。</span><span class="sxs-lookup"><span data-stu-id="fc779-122">It can also be very helpful to have another Unity instance of the original app to allow for side-by-side comparison during the port process.</span></span> 

> [!NOTE]
> <span data-ttu-id="fc779-123">移植の前に、Windows Mixed Reality の開発用に最新のツールがインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fc779-123">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="fc779-124">ほとんどの既存 HoloLens 開発者は、主に最新の Visual Studio 2017 への更新と適切な Windows SDK のインストールを行うことになります。</span><span class="sxs-lookup"><span data-stu-id="fc779-124">For most existing HoloLens developers, this will primarily involve updating to the latest Visual Studio 2017 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="fc779-125">以下の内容では、Unity のさまざまなバージョンと Mixed Reality Toolkit バージョン 2 についてさらに詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="fc779-125">The content below will dive further into different Unity versions and the Mixed Reality Toolkit version 2.</span></span>
>
> <span data-ttu-id="fc779-126">詳しくは、[ツールのインストール](install-the-tools.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fc779-126">For more information, please see [Install the tools](install-the-tools.md).</span></span>

## <a name="migrate-project-to-latest-version-of-unity"></a><span data-ttu-id="fc779-127">プロジェクトを最新バージョンの Unity に移行する</span><span class="sxs-lookup"><span data-stu-id="fc779-127">Migrate project to latest version of Unity</span></span>

<span data-ttu-id="fc779-128">MRTK v2 を使用している場合、Unity または MRTK で互換性に影響する変更が発生しない最適な長期サポート パスは Unity 2018 LTS になります。</span><span class="sxs-lookup"><span data-stu-id="fc779-128">If using the MRTK v2, then Unity 2018 LTS will be the best long-term support path with no breaking changes in Unity or in MRTK.</span></span>  <span data-ttu-id="fc779-129">上記のツールのインストールに関するページでは、推奨される Unity ビルドは Unity 2018.3 です。今後これが Unity 2018 の LTS リリースになります。</span><span class="sxs-lookup"><span data-stu-id="fc779-129">The recommended Unity build, per the above "install the tools" is Unity 2018.3, which will become the LTS release for Unity 2018.</span></span>  <span data-ttu-id="fc779-130">また、MRTK v2 は Unity 2018 LTS のサポートを常に保証していますが、必ずしも Unity 2019.x のすべてのイテレーションのサポートが保証されるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="fc779-130">Further, the MRTK v2 will always guarantee support for Unity 2018 LTS but not necessarily guarantee support for every iteration of Unity 2019.x.</span></span> 

<span data-ttu-id="fc779-131">Unity 2018.3.x または Unity 2019.1.x との間の他の相違点を明らかにするために、以下では、これら 2 つのバージョン間でのトレードオフについて説明します。主な違いは、Unity 2019 で ARM64 用にコンパイルする機能です。</span><span class="sxs-lookup"><span data-stu-id="fc779-131">To help clarify additional differences between Unity 2018.3.x or Unity 2019.1.x, below outlines the trade-offs between these two versions, with the primary difference of significance being the ability to compile for ARM64 in Unity 2019.</span></span> 

<span data-ttu-id="fc779-132">開発者は、現在プロジェクトに存在するすべての[プラグインの依存関係](https://docs.unity3d.com/Manual/Plugins.html)と、DLL が ARM64 でビルドできるかどうかを評価する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-132">Developers should assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in their project and whether or not these DLLs can be built for ARM64.</span></span> <span data-ttu-id="fc779-133">ARM64 でハードに依存するプラグインをビルドできない場合は、Unity 2018 LTS を使用しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="fc779-133">If a hard dependency plugin cannot be built for ARM64, then one will have to utilize Unity 2018 LTS.</span></span>


| <span data-ttu-id="fc779-134">Unity 2018.3.x</span><span class="sxs-lookup"><span data-stu-id="fc779-134">Unity 2018.3.x</span></span> | <span data-ttu-id="fc779-135">Unity 2019.1+</span><span class="sxs-lookup"><span data-stu-id="fc779-135">Unity 2019.1+</span></span> |
|----------|-------------------|
| <span data-ttu-id="fc779-136">ARM32 ビルドのサポート</span><span class="sxs-lookup"><span data-stu-id="fc779-136">ARM32 build support</span></span> | <span data-ttu-id="fc779-137">ARM32 および ARM64 ビルドのサポート</span><span class="sxs-lookup"><span data-stu-id="fc779-137">ARM32 and ARM64 build support</span></span> |
| <span data-ttu-id="fc779-138">安定版の LTS ビルド リリース</span><span class="sxs-lookup"><span data-stu-id="fc779-138">Stable LTS build release</span></span> | <span data-ttu-id="fc779-139">ベータ版の安定性</span><span class="sxs-lookup"><span data-stu-id="fc779-139">Beta stability</span></span> |
| <span data-ttu-id="fc779-140">[.NET スクリプト バックエンド](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *非推奨*</span><span class="sxs-lookup"><span data-stu-id="fc779-140">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *deprecated*</span></span> | <span data-ttu-id="fc779-141">[.NET スクリプト バックエンド](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *削除済み*</span><span class="sxs-lookup"><span data-stu-id="fc779-141">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *removed*</span></span> |
| <span data-ttu-id="fc779-142">UNET Networking *非推奨*</span><span class="sxs-lookup"><span data-stu-id="fc779-142">UNET Networking *deprecated*</span></span> | <span data-ttu-id="fc779-143">UNET Networking *削除済み*</span><span class="sxs-lookup"><span data-stu-id="fc779-143">UNET Networking *removed*</span></span> |

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="fc779-144">Unity でシーンまたはプロジェクト設定を更新する</span><span class="sxs-lookup"><span data-stu-id="fc779-144">Update scene/project settings in Unity</span></span>

<span data-ttu-id="fc779-145">デバイスで最適な結果を得るために、Unity 2018.3.x または Unity 2019 以降に更新した後、Unity を特定の設定に更新すること をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fc779-145">After updating to Unity 2018.3.x or Unity 2019+, it is recommended to update particular settings in Unity for optimal results on device.</span></span> <span data-ttu-id="fc779-146">この設定については、 **[Unity の推奨設定](Recommended-settings-for-Unity.md)** で詳しく説明しています。</span><span class="sxs-lookup"><span data-stu-id="fc779-146">These settings are outlined in detail under **[Recommended settings for Unity](Recommended-settings-for-Unity.md)**.</span></span>

<span data-ttu-id="fc779-147">もう一度お伝えしますが、[.NET スクリプト バックエンド](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)は、Unity 2018 で非推奨となり、Unity 2019 で*削除*されているため、開発者はプロジェクトを [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html) に切り替えることを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-147">It should be re-iterated that the [.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and *removed* in Unity 2019 and thus, developers should strongly consider switching their project over to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span> 

> [!NOTE]
> <span data-ttu-id="fc779-148">IL2CPP スクリプト バックエンドを使用すると、Unity から Visual Studio へのビルド時間が長くなる場合があります。そのため、開発者はコンピューターをセットアップするため[IL2CPP ビルド時間の最適化](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-148">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio and thus developers should setup their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="fc779-149">特に、大きなアセット (スクリプト ファイルを除く) がある場合や、常にシーンやアセットを変更する Unity プロジェクトの場合は、[キャッシュ サーバー](https://docs.unity3d.com/Manual/CacheServer.html)をセットアップするとよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="fc779-149">Furthermore, it may be beneficial to setup a [Cache Server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes/assets.</span></span> <span data-ttu-id="fc779-150">プロジェクトを開く際に、Unity は条件を満たすアセットを内部キャッシュ フォーマットで開発者のコンピューターに格納します。</span><span class="sxs-lookup"><span data-stu-id="fc779-150">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="fc779-151">項目を変更した場合は、再インポートして再処理されるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-151">Items must be re-imported and thus re-processed when modified.</span></span> <span data-ttu-id="fc779-152">このプロセスが 1 回実行されると、キャッシュ サーバーに保存され、すべての開発者に共有されます。すべての開発者がローカルで新しい変更の再インポート処理を行う必要がなくなるので、時間を節約できます。</span><span class="sxs-lookup"><span data-stu-id="fc779-152">This process can be done once and saved in a Cache Server and consequently shared with other developers to save time, instead of every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="fc779-153">開発者は、更新した Unity のバージョンに移行し、互換性のない変更に対処した後、HoloLens (第 1 世代) で現在のアプリをビルドしてテストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-153">After addressing any breaking changes after moving to the updated Unity version, developers should build and test their current apps on HoloLens (1st gen).</span></span> <span data-ttu-id="fc779-154">また、この時点でソース管理にコミットを作成し、保存しておくとよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="fc779-154">Further, this is a good point to create and save a commit for source control.</span></span> 

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="fc779-155">ARM プロセッサ用の依存関係およびプラグインのコンパイル</span><span class="sxs-lookup"><span data-stu-id="fc779-155">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="fc779-156">HoloLens (第 1 世代) は、x86 プロセッサ上でアプリケーションを実行しますが、新しい HoloLens 2 デバイスは、ARM プロセッサを利用します。</span><span class="sxs-lookup"><span data-stu-id="fc779-156">HoloLens (1st gen) executed applications on an x86 processor while the new HoloLens 2 device utilizes an ARM processor.</span></span> <span data-ttu-id="fc779-157">したがって、既存のアプリケーションは、ARM をサポートするように移植する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-157">Thus, existing applications need to be ported over to support ARM.</span></span> <span data-ttu-id="fc779-158">前述のように、Unity 2018 は ARM32 アプリのコンパイルをサポートしますが、Unity 2019 以降は ARM64 アプリのコンパイルをサポートします。</span><span class="sxs-lookup"><span data-stu-id="fc779-158">As noted earlier, Unity 2018 supports compiling for ARM32 apps while Unity 2019+ supports compiling for ARM64 apps.</span></span> <span data-ttu-id="fc779-159">一般的に、パフォーマンスに重要な相違があるため、ARM64 アプリケーションでの開発が推奨されます。</span><span class="sxs-lookup"><span data-stu-id="fc779-159">Developing for ARM64 applications is generally preferred as there is a material difference in performance.</span></span> <span data-ttu-id="fc779-160">ただし、そのためには、すべての[プラグインの依存関係](https://docs.unity3d.com/Manual/Plugins.html)も ARM64 でビルドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-160">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span> 

<span data-ttu-id="fc779-161">現在のアプリケーション内のすべての DLL 依存関係を確認してください。</span><span class="sxs-lookup"><span data-stu-id="fc779-161">Review all DLL dependencies in your application currently.</span></span> <span data-ttu-id="fc779-162">依存関係が不要になった場合は、プロジェクトから削除することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fc779-162">If a dependency is no longer needed, it is advisable to remove it from your project.</span></span> <span data-ttu-id="fc779-163">必要な残りのプラグインについて、Unity プロジェクトにそれぞれ ARM32 または ARM64 バイナリを取り込みます。</span><span class="sxs-lookup"><span data-stu-id="fc779-163">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span> 

<span data-ttu-id="fc779-164">関連する DLL を取り込んだ後、Unity から Visual Studio ソリューションをビルドし、アプリケーションが ARM プロセッサでビルドできるかどうかを試すために、Visual Studio で AppX を ARM 向けにコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="fc779-164">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and then compile an AppX for ARM in Visual Studio to test that your application can be built for ARM processors.</span></span> <span data-ttu-id="fc779-165">ここが、ソース管理ソリューションでコミットを保存することが推奨されるもう 1 つのポイントです。</span><span class="sxs-lookup"><span data-stu-id="fc779-165">This another point where it is advised to save a commit in your source control solution.</span></span> 

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="fc779-166">MRTK バージョン 2 に更新する</span><span class="sxs-lookup"><span data-stu-id="fc779-166">Update to MRTK version 2</span></span>

<span data-ttu-id="fc779-167">MRTK バージョン 2 は、Unity をベースにした新しいツールキットで、HoloLens (第 1 世代) と HoloLens 2 の両方をサポートしています。また、手による操作や視線追跡など、すべての HoloLens 2 の新機能が追加されています。</span><span class="sxs-lookup"><span data-stu-id="fc779-167">MRTK version 2 is the new toolkit on top of Unity supporting both HoloLens (1st gen) and HoloLens 2, and where all of the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

### <a name="prepare-for-the-migration"></a><span data-ttu-id="fc779-168">移行を準備する</span><span class="sxs-lookup"><span data-stu-id="fc779-168">Prepare for the migration</span></span>

<span data-ttu-id="fc779-169">新しい [MRTK v2 用の \*.unitypackage ファイル](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases)を取り込む前に、**1) MRTK v1 を組み込んだ任意のカスタム ビルド コード**と、**2) 入力操作や UX コンポーネントのカスタム ビルド コード**のインベントリを取得することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="fc779-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it is recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="fc779-170">Mixed Reality 開発者が新しい MRTK v2 を取り込む際に最も競合が起きやすいのは、入力と操作に関係する部分です。</span><span class="sxs-lookup"><span data-stu-id="fc779-170">The most common and prevalent conflict for a Mixed Reality developer ingesting the new MRTK v2 will involve input and interactions.</span></span> <span data-ttu-id="fc779-171">そのため、[MRTK v2 入力モデル](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html)を読んで理解しておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fc779-171">Thus, it is advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="fc779-172">最後に、新しい MRTK v2 は、スクリプトのモデルおよびシーン内マネージャー オブジェクトから、構成およびサービス プロバイダー アーキテクチャに移行されています。</span><span class="sxs-lookup"><span data-stu-id="fc779-172">Finally, the new MRTK v2 has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="fc779-173">これにより、シーンの階層とアーキテクチャのモデルがクリーンになりますが、新しい構成プロファイルを習得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-173">This results in a cleaner scene hierarchy and architecture model but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="fc779-174">したがって、重要な設定やプロファイルについて理解し、アプリケーションのニーズに合わせて調整することができるように、[Mixed Reality ツールキット構成ガイド](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fc779-174">Thus, please read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span> 

### <a name="perform-the-migration"></a><span data-ttu-id="fc779-175">移行する</span><span class="sxs-lookup"><span data-stu-id="fc779-175">Perform the migration</span></span>

<span data-ttu-id="fc779-176">MRTK v2 をインポートすると、Unity プロジェクトでたくさんのコンパイラ関連エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="fc779-176">After importing MRTK v2, your Unity project will likely have many compiler related errors.</span></span> <span data-ttu-id="fc779-177">多くの場合、これらの原因は新しい名前空間の構造と新しいコンポーネント名です。</span><span class="sxs-lookup"><span data-stu-id="fc779-177">These are most commonly due to the new namespace structure and new component names.</span></span> <span data-ttu-id="fc779-178">スクリプトの名前空間とコンポーネントを新しいものに変更し、これらのエラーを解決します。</span><span class="sxs-lookup"><span data-stu-id="fc779-178">Proceed to resolve these errors by modifying your scripts to the new namespaces and components.</span></span> 

<span data-ttu-id="fc779-179">HTK/MRTK と MRTK バージョン 2 の具体的な API の相違点の詳細については、 [MRTK バージョン 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html) の移植ガイドをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fc779-179">For more information on specific API differences between HTK/MRTK and MRTK version 2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="fc779-180">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="fc779-180">Best practices</span></span>

- <span data-ttu-id="fc779-181">MRTK 標準シェーダーの使用を優先する</span><span class="sxs-lookup"><span data-stu-id="fc779-181">Prefer use of the MRTK Standard shader</span></span>
- <span data-ttu-id="fc779-182">互換性に影響する種類の変更には 1 つずつ対応する (例:IFocusable を IMixedRealityFocusHandler に)</span><span class="sxs-lookup"><span data-stu-id="fc779-182">Work on one breaking change type at a time (ex: IFocusable to IMixedRealityFocusHandler)</span></span>
- <span data-ttu-id="fc779-183">変更のたびにテストし、ソース管理を利用する</span><span class="sxs-lookup"><span data-stu-id="fc779-183">Test after every change and utilize source control</span></span>
- <span data-ttu-id="fc779-184">可能な場合は既定の MRTK UX (ボタン、スレートなど) を使用する</span><span class="sxs-lookup"><span data-stu-id="fc779-184">Use default MRTK UX (buttons, slates, etc) when possible</span></span>
- <span data-ttu-id="fc779-185">MRTK ファイルを直接変更するのは避け、MRTK コンポーネントのラッパーを作成する</span><span class="sxs-lookup"><span data-stu-id="fc779-185">Try to refrain from modifying MRTK files directly, instead create wrappers around MRTK components</span></span>
    - <span data-ttu-id="fc779-186">将来の MRTK の取り込みや更新プログラムの影響を受けなくなる</span><span class="sxs-lookup"><span data-stu-id="fc779-186">This will protect against future MRTK ingestions and updates</span></span>
- <span data-ttu-id="fc779-187">MRTK で提供されているサンプルのシーンを確認する (特に *HandInteractionExamples.scene*)</span><span class="sxs-lookup"><span data-stu-id="fc779-187">Review & explore sample scenes provided in MRTK (especially *HandInteractionExamples.scene*)</span></span>
- <span data-ttu-id="fc779-188">キャンバス ベースの UI を四角形、コライダー、TextMeshPro テキストで再構築する</span><span class="sxs-lookup"><span data-stu-id="fc779-188">Rebuild canvas-based UI with quads, colliders and TextMeshPro text instead</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="fc779-189">アプリケーションのテスト</span><span class="sxs-lookup"><span data-stu-id="fc779-189">Testing your application</span></span>

<span data-ttu-id="fc779-190">[RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1) 時点で、HoloLens 2 のコンポーネントおよび機能が MRTK バージョン 2 で使用できるようになっています。そのため、手による操作を直接 Unity でシミュレートし、手による操作と視線追跡の新しい API を使って開発を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="fc779-190">Now that HoloLens 2 components and capabilities are available in MRTK version 2, as of [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1), you can simulate the hand interactions directly in Unity, and develop against the new APIs for hand interactions and eye tracking.</span></span>  <span data-ttu-id="fc779-191">優れたエクスペリエンスを作成するには HoloLens 2 デバイスが必要ですが、少なくとも、ツールと説明書の学習を始めることはできます。</span><span class="sxs-lookup"><span data-stu-id="fc779-191">The HoloLens 2 device is required to create a great experience, but at least one could start learning in the tools and documentation.</span></span> <span data-ttu-id="fc779-192">また、MRTK v2 は HoloLens (第 1 世代) の開発をサポートしています。そのため、エア タップによる選択などの従来の入力モデルは、引き続き HoloLens (第 1 世代) デバイスでテストできます。</span><span class="sxs-lookup"><span data-stu-id="fc779-192">Further, MRTK v2 supports development on HoloLens (1st gen) and thus, traditional input models such as select via air-tap can still be tested on HoloLens (1st gen) devices.</span></span> 

## <a name="updating-interaction-model-for-hololens-2"></a><span data-ttu-id="fc779-193">HoloLens 2 の操作モデルの更新</span><span class="sxs-lookup"><span data-stu-id="fc779-193">Updating interaction model for HoloLens 2</span></span>

<span data-ttu-id="fc779-194">アプリを移植して HoloLens 2 に対応できたら、操作モデルやホログラムの設計および配置の更新を検討する準備が整います。</span><span class="sxs-lookup"><span data-stu-id="fc779-194">Once you have your app ported and prepped for HoloLens 2, you are ready to consider updating your interaction model and hologram designs/placement.</span></span>
<span data-ttu-id="fc779-195">もともと HoloLens (第 1 世代) のアプリだったため、視線入力とコミットによる操作モデルが使われており、視野に収まるようにホログラムがかなり遠くにある可能性が高いはずです。</span><span class="sxs-lookup"><span data-stu-id="fc779-195">Coming from HoloLens (1st gen), your app likely has a gaze and commit interaction model, with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="fc779-196">アプリの設計を HoloLens 2 に最適にする手順は、以下のとおりです。</span><span class="sxs-lookup"><span data-stu-id="fc779-196">Steps to update your app design to be best for HoloLens 2:</span></span>
1.  <span data-ttu-id="fc779-197">MRTK コンポーネント:事前の作業で MRTK v2 を追加した場合は、HoloLens 2 用に設計および最適化されているさまざまなコンポーネントやスクリプトを活用できます。</span><span class="sxs-lookup"><span data-stu-id="fc779-197">MRTK components: Per the pre-work, if you added MRTK v2, there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="fc779-198">操作モデル:操作モデルを更新することを検討します。</span><span class="sxs-lookup"><span data-stu-id="fc779-198">Interaction model: Consider updating your interaction model.</span></span>  <span data-ttu-id="fc779-199">ほとんどのシナリオでは、視線入力とコミットを手に切り替えることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fc779-199">For most scenarios, we recommend switching from gaze and commit to hands.</span></span>  <span data-ttu-id="fc779-200">通常、ホログラムは手の届かないところにあるので、手に切り替えることで、ポインティング レイやグラブ ジェスチャによる遠隔インタラクションを利用することになります。</span><span class="sxs-lookup"><span data-stu-id="fc779-200">With your holograms typically being out of arms reach, switching to hands will result in far interaction pointing rays and grab gestures.</span></span>
<span data-ttu-id="fc779-201">注: ツールを持っているタスク ワーカーなど、手を使わない操作モデルが必要なシナリオもあります。このような場合に向けた特別な設計ガイダンスが存在します。</span><span class="sxs-lookup"><span data-stu-id="fc779-201">Note: there are scenarios where a hands-free interaction model is required, such as a task worker holding tools, and there is specific design guidance for such cases.</span></span> 

3.  <span data-ttu-id="fc779-202">ホログラムの配置:手による操作モデルに切り替えた後は、直接手で近接インタラクションのグラブ ジェスチャを使用した操作を行えるように、ホログラムを近くに移動することを検討します。</span><span class="sxs-lookup"><span data-stu-id="fc779-202">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with the holograms with your hands, using near interaction grab gestures.</span></span>  <span data-ttu-id="fc779-203">直接つかんだり操作を行ったりするために近くに移動させることが推奨されるホログラムの種類は、小さなターゲット メニュー、コントロール、ボタン、およびグラブしたり調べたりしても HoloLens 2 の視野に収まる小さなホログラムです。</span><span class="sxs-lookup"><span data-stu-id="fc779-203">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="fc779-204">どのアプリやシナリオにも同じものはないので、フィードバックや継続する学習に基づいて設計ガイダンスを見直し、掲載し続ける予定です。</span><span class="sxs-lookup"><span data-stu-id="fc779-204">Every app and scenario is different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-learnings-from-moving-apps-from-x86-to-arm"></a><span data-ttu-id="fc779-205">x86 から ARM へのアプリを移植するにあたっての追加情報</span><span class="sxs-lookup"><span data-stu-id="fc779-205">Additional learnings from moving apps from x86 to ARM</span></span>

- <span data-ttu-id="fc779-206">単純な Unity アプリは、ARM appx バンドルをビルドしてデバイスに直接配置すれば実行できるので、簡単です。</span><span class="sxs-lookup"><span data-stu-id="fc779-206">Straight Unity apps are simple as you can build an ARM appx bundle or deploy directly to the device and it runs.</span></span>
<span data-ttu-id="fc779-207">問題は、Unity アプリがネイティブ プラグインを使用する場合です。</span><span class="sxs-lookup"><span data-stu-id="fc779-207">The challenge comes when the Unity app uses native plugins.</span></span>  <span data-ttu-id="fc779-208">すべてのネイティブ プラグインは、VS2017 にアップグレードして ARM 用にビルドしなおす必要があります。Unity 2019 では、ARM64 用にビルドしなおします。</span><span class="sxs-lookup"><span data-stu-id="fc779-208">All of the native plugins need to be upgraded to VS2017 and rebuilt for ARM, and with Unity 2019, ARM64.</span></span>

- <span data-ttu-id="fc779-209">Unity で AudioKinetic Wwise プラグインを使用しているあるアプリでは、使用されているバージョンに UWP ARM プラグインがありませんでした。</span><span class="sxs-lookup"><span data-stu-id="fc779-209">One app, used the AudioKinetic Wwise plugin for Unity, and the version used didn’t have a UWP ARM plugin.</span></span> <span data-ttu-id="fc779-210">アプリケーションのサウンドを見直して ARM で動作するようになるまで、数日がかかりました。</span><span class="sxs-lookup"><span data-stu-id="fc779-210">It took several days to re-work the sound in the application to work on ARM.</span></span>

- <span data-ttu-id="fc779-211">他にも、アプリに必要なプラグインの UWP/ARM プラグインが存在しないため、移植して HoloLens 2 で実行することができない場合もあるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="fc779-211">In other cases, a UWP/ARM plugin may not exist for app-required plugins, blocking the ability to port and run on HoloLens 2.</span></span>  <span data-ttu-id="fc779-212">これに対処して ARM をサポートするには、プラグインのプロバイダーによる作業が必要になる可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="fc779-212">Engagement with the plugin provider may be needed to unblock and support ARM.</span></span>

- <span data-ttu-id="fc779-213">HoloLen 2 では、シェーダーの minfloat (および min16float、minint などのバリアント) の動作が HoloLens (第 1 世代) と異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-213">The minfloat (and variants such as min16float, minint, etc…) in shaders may behave differently on HoloLen 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="fc779-214">具体的には、「少なくとも指定された数のビットが使われる」ことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="fc779-214">Specifically, these guarantee that “at least the specified number of bits will be used”.</span></span> <span data-ttu-id="fc779-215">ほとんどの Intel/Nvidia の GPU では、単なる 32 ビットとして扱われます。</span><span class="sxs-lookup"><span data-stu-id="fc779-215">On Intel/Nvidia GPUs, these are largely just treated as 32 bits.</span></span> <span data-ttu-id="fc779-216">ARM では、指定されたビット数が実際に使用されます。</span><span class="sxs-lookup"><span data-stu-id="fc779-216">On ARM, the number of bits specified is actually respected.</span></span> <span data-ttu-id="fc779-217">実際には、HoloLens 2 でのこれらの数値の精度や範囲は、HoloLens (第 1 世代) よりも小さくなります。</span><span class="sxs-lookup"><span data-stu-id="fc779-217">That means that in practice, these numbers may have less precision/range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="fc779-218">ARM では _asm 命令は動作しないと見られるので、_asm 命令を使っているコードはすべて書き直す必要があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-218">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions will have to be rewritten.</span></span>

- <span data-ttu-id="fc779-219">ARM では、SIMD 命令セットがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="fc779-219">The SIMD instruction set is not supported on ARM.</span></span> <span data-ttu-id="fc779-220">そのため、ARM では xmmintrin.h、emmintrin.h、tmmintrin.h、および immintrin.h などの各種ヘッダーは使用できません。</span><span class="sxs-lookup"><span data-stu-id="fc779-220">This means various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h are not available on ARM.</span></span>

- <span data-ttu-id="fc779-221">ARM のシェーダー コンパイラは、シェーダーの読み込み時ではなく、シェーダーが読み込まれた後またはシェーダーが依存するものが変更された後の最初の描画呼び出しの中で実行されます。</span><span class="sxs-lookup"><span data-stu-id="fc779-221">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="fc779-222">コンパイルする必要があるシェーダーの数によっては、フレーム レートへの影響が顕著になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="fc779-222">The impact on framerate can be very noticeable, depending on how many shaders need to be compiled.</span></span> <span data-ttu-id="fc779-223">この点から、HoloLens 2 と HoloLens (第 1 世代) でどのようにシェーダーの処理/パッケージ化/更新の方法を変えるべきかについて、さまざまなことがわかります。</span><span class="sxs-lookup"><span data-stu-id="fc779-223">This has various implications for how shaders should be handled/packaged/updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="fc779-224">関連項目</span><span class="sxs-lookup"><span data-stu-id="fc779-224">See also</span></span>
* [<span data-ttu-id="fc779-225">MRTK バージョン 2 をお使いになる前に</span><span class="sxs-lookup"><span data-stu-id="fc779-225">Getting started with MRTK version 2</span></span>](mrtk-getting-started.md)
* [<span data-ttu-id="fc779-226">MRTK バージョン 2 の使用方法</span><span class="sxs-lookup"><span data-stu-id="fc779-226">MRTK Version 2 HowTo</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/External/HowTo/README.html)
* [<span data-ttu-id="fc779-227">ツールのインストール</span><span class="sxs-lookup"><span data-stu-id="fc779-227">Install the tools</span></span>](install-the-tools.md)
* [<span data-ttu-id="fc779-228">Unity で推奨される設定</span><span class="sxs-lookup"><span data-stu-id="fc779-228">Recommended settings for Unity</span></span>](recommended-settings-for-unity.md)
* [<span data-ttu-id="fc779-229">Mixed Reality のパフォーマンスを理解する</span><span class="sxs-lookup"><span data-stu-id="fc779-229">Understanding performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)

