---
title: ケース スタディのキャプチャと HoloTour のコンテンツを作成します。
description: Microsoft HoloLens の HoloTour は、世界中の象徴的な場所の没入型の 3D 個人ツアーを提供します。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 複合現実 HoloTour、HoloLens、Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597634"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a>ケース スタディのキャプチャと HoloTour のコンテンツを作成します。

Microsoft HoloLens の HoloTour は、世界中の象徴的な場所の没入型の 3D 個人ツアーを提供します。 デザイナー、アーティスト、プロデューサー、オーディオのデザイナーおよびが見つかりました。 このプロジェクトで作業する開発者、既知の場所の 3D が実際のレンダリングの作成と、創造性と技術の技術の一意の組み合わせがかかります。

## <a name="the-tech"></a>技術者

HoloTour での世界で最も驚くような変換先の一部にアクセスするユーザーを可能に考えました: のように、[マチュピチュの遺跡](https://en.wikipedia.org/wiki/Machu_Picchu)ペルーまたは最新の日で[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)イタリア-右から独自のリビング ルーム。 私たちのチームが作成する「ことが本当にいる気分を」HoloTour の目的は、 画像またはビデオだけにするために必要なの経験。 一意の表示、追跡、および HoloLens のオーディオのテクノロジを活用することで別の場所にする事実上トランスポート私たちでしたと考えられています。 カフェ_オレ、サウンド、およびすべての場所にアクセスして、アプリ内で再作成することの 3 次元の geometry をキャプチャする必要があります。

これを行うには、360 ° カメラありました方向オーディオ キャプチャを発すます。 これは、映像は、HoloLens で再生するときに鮮明になり、成果物の作成を最小限に抑えるために近くに配置する、カメラになるように、非常に高解像度でキャプチャする必要。 完全な球体カバレッジ、近い将来、に沿ってだけでなくが上下するも考えました。 リモート テスト マシン群の世界中に取得できます。 ように移植可能な場合にも必要です。 使用可能な市販のオプションを評価して実現だけ十分ビジョン – 解像度、コスト、またはサイズのためにされませんでした。 ニーズを満たすカメラ rig が見つからない場合に自分たちの 1 つのビルドになります。

### <a name="building-the-rig"></a>リモート テスト マシン群の構築

最初のバージョン-ダクト テープ、および 14 GoPro カメラの cardboard、Velcro から行われる-マクガイバーを誇りに思っていたものでした。 カスタム製造リモート テスト マシン群をローエンド ソリューションからすべてのものを確認するには後、GoPro カメラが最終的に私たちにとって最適なオプションが小さな、低コスト、使いやすいメモリ ストレージを必要があるので。 カメラをかなり近くに配置することが許可されているため、フォーム ファクターは小さいが特に重要ですが、カメラの間、小さい方の距離をつなぎ合わせること、小さい方の成果物になります。 一意のカメラの配置では、完全な球体カバレッジを取得できました。 *plus*十分な重複をインテリジェントにカメラを配置して、作成プロセス中に、一部のアイテムを滑らかにします。

利用、[空間サウンド](spatial-sound.md)HoloLens の機能が実際に没入型エクスペリエンスを実現するのには重要です。 4 つの方向で、カメラの位置から音がキャプチャは、三脚にカメラの下に設置されている 4 マイク配列を使用すると、当社のシーンでの空間のサウンドを作成するのに十分な情報を提供すること。

![この 360 ° カメラ リモート テスト マシン群は、映画、Pantheon の外部を設定します。](images/camera-pantheon-200px.png)

この 360 ° カメラ リモート テスト マシン群は、映画、Pantheon の外部を設定します。 


テストしました、見せびらかしリモート テスト マシン群をシアトル、ほぼ Rattlesnake ねじ山最大にすることによって、ハイキングの上部にある風景をキャプチャします。 結果、洗練 HoloTour で今日では、「場所よりも大幅にもくれました、リモート テスト マシン群デザイン十分にある本当にいる気分を信頼します。

カメラの 3D 印刷ハウジングに Velcro と cardboard から、リモート テスト マシン群をアップグレードし、バッテリの管理を簡略化 GoPro カメラの外部のバッテリ パックを購入します。 実行したより広範なテストでは、都市の海岸と象徴的なゴールデン ゲート ブリッジのミニチュア ツアーを作成する San Francisco まで移動します。 このカメラのリモート テスト マシン群では、HoloTour にアクセスする場所のキャプチャのほとんどの場合です。

![映画マチュピチュの 360 ° カメラ装置です。](images/camera-machu-pichu-500px.png)

映画マチュピチュの 360 ° カメラ装置です。 


## <a name="behind-the-scenes"></a>しくみ

映画、前にために必要する場所をかったに含める仮想ツアーで。 最初の場所を出荷するためのものでローマ、させるトリップを事前に実行することにしましたので、取得します。 6 人のチームに送信しました: アーティスト、デザイナー、プロデューサーなど — 検討しましたが、サイトに、人の訪問します。 旅行には、約 9 日 – 出張、映画の残りの部分の 2.5 がかかりました。 (マチュピチュのしましたしない scout 乗車で事前に調査して、映画のバッファーのいくつかの日を予約します。)

中には、ローマ、チームは、各領域の撮影し、上の考慮事項と同様に興味深いことに注意して、各スポットがいかに難しいと移動するが難しいなどとなります。 フィルムに観衆または制限のため。 これは、休暇ように思えるかもしれませんが、多くの作業です。 日は朝の早い段階で開始され、仮に無停止夕方までです。 毎晩、確認をシアトルに戻り、チームの映像がアップロードされました。 

![ローマ キャプチャ クルーは、します。](images/holotour-filming-crew-rome-500px.jpg) 

ローマ キャプチャ クルーは、します。 


Scout のトリップが完了した後、最終的なプランは実際の映画の行われました。 これにより、場所つもりでしたが、フィルムへのどの日で、どの時間の詳細な一覧が必要です。 これらのトリップを効率的に必要です高価では毎日海外です。 役立つガイドおよびローマでハンドラーを予約し、完全に終了した後の日の出前に、から毎日を使用します。 実際にはそこにいる気分するようにするために可能な最適な映像を取得する必要があります。

### <a name="capturing-the-video"></a>ビデオのキャプチャ

キャプチャ中に、いくつかの単純な操作を実行すると、後処理がはるかに簡単です。 たとえば、複数のカメラから画像を合成するたびに最終的に visual アーティファクトを含む各カメラが若干異なるビュー。 カメラのうち、大きい方に、ビューの違いは、近くのオブジェクトと作成の成果物は大きくなります。 この問題を視覚化する簡単な方法を次に示します: の文字盤の前に、thumb を保持し、1 つだけの目で見ています。 目を切り替えるようになりました。 親指がバック グラウンドの基準とした移動が表示されることを確認します。 文字盤からさらに、thumb テストは反復して、以下を移動する親指が表示されます。 その明らかな移動の作成の問題に似ていますが直面しています。当社のカメラのように、目を少し距離で分離されているため、同じイメージが表示されません。

簡単に処理後にこれらを修正するよりも、映画の中に最悪の成果物を防ぐため、拡大オブジェクト内の合成する必要性を取り除くことができます希望のカメラから遠人や物を保持しようとしました。 カメラの周囲の大規模な消去の維持がおそらく必要がある撮影中に最も大きな課題の 1 つと、動作させるのにはクリエイティブを取得する必要があります。 ローカルのガイドを使用した作業が、群衆の管理に非常に便利であるを使用して署名することもが見つかりました: も小さなコーンや bean バッグ — filming、スペースをマークする合理的が有効であった、各場所で映像の短い時間を取得する必要のみので特にします。 多くの場合、適切なキャプチャを取得する最善の方法は、朝のほとんどの人を表示する前に、非常に早い段階で到着しただけでした。

その他のいくつかの便利なキャプチャ手法は、従来のフィルムのプラクティスから直接取得されます。 たとえば、テクスチャと後で必要な場合がありますオブジェクトの写真をキャプチャされた参照と、カメラのすべての色補正のカードを使用しました。 

![ラフカット マチュピチュ色補正のカードを表示します。](images/rough-cut-machu-picchu-500px.png)

合成する前に Pantheon の映像の大まかなカットされます。

### <a name="processing-the-video"></a>ビデオの処理

最初の手順は、360 ° のコンテンツをキャプチャ、HoloTour に最終資産にキャプチャした生のカメラの映像を変換する多くの処理が必要です。 でした。 バックアップと 14 のさまざまなカメラからビデオを実行する必要がありましたホーム フィードに最小限のアーティファクトを含む 1 つの継続的なビデオ。 アート チームを結合し、キャプチャされた映像をポーランド語、多数のツールを使用して、可能な限りの処理を最適化するためのパイプラインを開発しました。 映像は、修正し、混乱の元の要素と成果物を削除するか、寿命と動き、実際に存在するのには、その感情を強化するという目的を含むすべての補足のポケットを追加するには、複合、色を合成する必要があります。

![合成する前に Pantheon の映像の大まかなカットされます。](images/rough-cut-pantheon-500px.png)

合成する前に Pantheon の映像の大まかなカットされます。 


呼ばれるツールを使用して、ビデオを合成して、 [PTGui](http://www.ptgui.com/)処理パイプラインに統合されています。 処理後の一部としては、ビデオからまだフレームを抽出し、それらのフレームのいずれかの良さの作成パターンを検出します。 微調整するビデオ、アーティストを許可され、後の効果の合成中に直接作成パターンを調整すれば、作成したカスタム プラグインにも、このパターンを適用します。 

![スクリーン ショットの PTGui 継ぎ合わせた Pantheon 映像を表示します。](images/stitching-tool-pantheon-500px.png)

スクリーン ショットの PTGui 継ぎ合わせた Pantheon 映像を表示します。 


### <a name="video-playback"></a>ビデオ再生

映像の処理が完了した後、シームレスなビデオがあることが非常に大きな-約 8 K 解像度。 ビデオのデコードが高コストと、次の課題は、HoloLens に戻り、このビデオを再生する方法を見つけることでしたので、8 K のビデオを処理できる非常にほとんどのコンピューターがありません。 私たちは、さまざまな同時に、ユーザーの外観全体を表示していたようなビデオのデコードのコストを回避するための戦略を開発しました。

最も簡単な最適化では、ほとんど変更されない、ビデオの一部をデコードすることを回避します。 各シーンをほとんどまたはまったくないモーションを持つ領域を識別するためのツール作成しました。 それらのリージョンの紹介ビデオをデコードするのではなく、静的なイメージを各フレーム。 これを可能にするには、するには、はるかに小さいチャンクに大量のビデオを分割されます。

行いましたデコードされたすべてのピクセルが最も効果的に使用されたことを確認します。 ビデオ; のサイズを小さく圧縮方法で実験しましたに、投影、ジオメトリの多角形に従ってビデオの領域を分割しましたUv を調整し、含まれている量の詳細別ポリゴンに基づいてビデオを再パックするしました。 この作業の結果を 1 つ 8 k ビデオ検索をシーンに正しく再予測されるまでにほぼ判読できない多くのチャンク単位に変換として何を開始します。 テクスチャ マッピングと UV パッキングを理解しているゲーム開発者が、これはおそらくは見覚え。 

![最適化する前に Pantheon の完全なビュー。](images/pantheon-before-optimization-500px.png) 

最適化する前に Pantheon の完全なビュー。 


![ビデオ再生の処理、Pantheon の右半分です。](images/pantheon-process-video-playback-500px.png) 

ビデオ再生の処理、Pantheon の右半分です。 


![最適化と梱包の後に 1 つのビデオ領域の例です。](images/single-video-region-after-optimization-500px.png) 

最適化と梱包の後に 1 つのビデオ領域の例です。 


使用して別の面倒なはアクティブに表示していないビデオのデコードを回避するためにします。 HoloTour 中に、特定の時点で、完全なシーンの部分をのみ参照してくださいことができます。 ここだけ内または間もなく、視野 (FOV) 外部のビデオをデコードします。 頭を回転させると、FOV れるので、内に存在しなくなったものの再生を停止するビデオの領域の再生を開始しました。 これが発生しているが、急速の周囲にする場合、ビデオでは、2 つ目を開始するが表示されますが、ほとんどの人にことにさえ気付きません: それまでは準備が整ったら、どの、フェードがビデオにバックアップに静的な画像が表示されます。

この戦略を動作させる、広範なビデオ再生システムを開発しました。 行うビデオの切り替えを非常に効率的なために低レベルの再生のコードを最適化しました。 さらに、いつでも任意のビデオに迅速に切り替えるを可能にする特別な方法で、ビデオをエンコードする必要があります。 この再生パイプラインでは、段階的に実装しましたので開発時間の長い時間がかかります。 、効率が悪くよりシンプルなシステムが、許可されているデザイナーやアーティスト、エクスペリエンスと緩やかに変化させるには、最終的な品質バーを提供することを許可されている、より堅牢な再生システムを改善します。 この最終的なシステムでは、モニター、再生エンジンとシーン内でビデオを設定する Unity 内で作成したカスタムのツールがありました。

### <a name="recreating-near-space-objects-in-3d"></a>3D の領域の近くのオブジェクトを再作成

ビデオ HoloTour に表示される内容の大部分を占めるが Piazza Navona での描画など、Pantheon で、または、航空写真のシーン スタンド アロン バルーンの外部噴水、近くに表示する 3D オブジェクトのいくつか。 これらの 3D オブジェクトは、離れた奥行きの人間の知覚は閉じるを非常に良いため重要ですが、それほど優れていませんです。 そんなにビデオとの距離が、領域と命令することが本当に感じまでわざわざ行かずにユーザーを許可するのには、近くにあるオブジェクトは、深さを必要があります。 この手法は、自然の歴史博物館で表示されることの並べ替えに似ています —、フォア グラウンドで物理造園、プラント、および animal の見本をあるが、バック グラウンドでマスク巧妙マット描画に遠ざかります diorama を描きます。

一部のオブジェクトは、単に 3D アセットを作成し、エクスペリエンスを強化するために、シーンに追加します。 ペイント ツールや、バルーンは、このカテゴリに分類撮影時に存在していないためです。 ゲーム アセットと同様に、それらによって作成私たちのチームの 3D アーティストされ、テクスチャを適切にします。 所在地の近くのシーンでこれらを配置し、ゲーム エンジンできますそれらをレンダリング HoloLens の 2 つのディスプレイに 3D オブジェクトとして表示されるようにします。

Pantheon では、外部噴水などの他の資産が存在する、ビデオ撮影している場所の場所でこれらのオブジェクトからビデオを 3D に実際のオブジェクト、私たちには、さまざまな処理を行う必要があります。

最初に、各オブジェクトに関する追加情報必要があります。 私たちのチームが思っているように、多くのこれらのオブジェクトの参照の映像をキャプチャ映画の場所は中に、イメージを正確にテクスチャを再作成する詳細な十分です。 また、チームが実行を[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)スキャン、2 D 画像は、多数の 3D モデルを構築する最適な規模でのオブジェクトの大まかなモデルを提供します。

映像を処理すると、3 D の表現と後で置き換えられるオブジェクトは、ビデオから削除されます。 3D の資産が photogrammetry モデルに基づくがクリーンアップされ、によって、アーティスト、簡略化します。 一部のオブジェクトについては、ビデオの部分を使用できます: water テクスチャ、噴水のなど — が若のほとんどが、3 D オブジェクト、深さを認識し、エクスペリエンスの限られたスペース内にその周りをウォークすることができます。 このような領域の近くのオブジェクトを大幅に使うことでは、リアリティの意味に追加し、仮想の場所で、ユーザーを地上に役立ちます。 

![泉と pantheon の映像が削除されます。 3D アセットが置き換えされます。](images/object-removal-pantheon-500px.png)

泉と pantheon の映像が削除されます。 3D アセットが置き換えされます。


## <a name="final-thoughts"></a>まとめ

当然ながらが詳細に説明したよりも、このコンテンツを作成します。 いくつかのシーンがある-「不可能なパースペクティブ」と呼んでたい — 空気バルーンの乗車と、gladiator がいっそうクリエイティブなアプローチを採用すると、Colosseum で対策を含むです。 将来のケース スタディでは、これらに対処します。

ソリューションを実稼動中にありましたの大きな課題のいくつかの共有が他の開発者に役立つとこれらの手法の一部を使用して、HoloLens の独自の没入型エクスペリエンスを作成するひらめいたすることと思います。 (上の私たちと共有することを確認してください、行った場合と、 [HoloLens アプリ開発フォーラム](https://forums.hololens.com/)!)

## <a name="about-the-authors"></a>著者について

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <b>David Haley</b>シニア開発者カメラ リモート テスト マシン群とビデオの再生についての彼と考え HoloTour での操作よりも詳細説明しました。</td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <b>Danny Askew</b>はビデオのアーティスト、ローマ体験が可能な限り、完璧なことを確認します。</td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <b>Jason Syltebo</b>に戻る場合でも、アクセスするすべての宛先の soundscape に発生する可能性があることを確認したオーディオ デザイナーです。</td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <b>Travis Steiner</b>調査し scouted 場所、旅行の計画を作成、およびサイトで映画を指示するデザインのディレクターです。</td>
</tr>
</table>



## <a name="see-also"></a>関連項目
* [ビデオ:Microsoft HoloLens の場合:HoloTour](https://www.youtube.com/watch?v=pLd9WPlaMpY)
