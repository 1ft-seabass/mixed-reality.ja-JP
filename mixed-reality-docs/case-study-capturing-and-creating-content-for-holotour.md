---
title: ケース スタディのキャプチャと HoloTour のコンテンツを作成します。
description: Microsoft HoloLens の HoloTour は、世界中の象徴的な場所の没入型の 3D 個人ツアーを提供します。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 複合現実 HoloTour、HoloLens、Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597634"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a><span data-ttu-id="e5e94-104">ケース スタディのキャプチャと HoloTour のコンテンツを作成します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-104">Case study - Capturing and creating content for HoloTour</span></span>

<span data-ttu-id="e5e94-105">Microsoft HoloLens の HoloTour は、世界中の象徴的な場所の没入型の 3D 個人ツアーを提供します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-105">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="e5e94-106">デザイナー、アーティスト、プロデューサー、オーディオのデザイナーおよびが見つかりました。 このプロジェクトで作業する開発者、既知の場所の 3D が実際のレンダリングの作成と、創造性と技術の技術の一意の組み合わせがかかります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-106">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span>

## <a name="the-tech"></a><span data-ttu-id="e5e94-107">技術者</span><span class="sxs-lookup"><span data-stu-id="e5e94-107">The tech</span></span>

<span data-ttu-id="e5e94-108">HoloTour での世界で最も驚くような変換先の一部にアクセスするユーザーを可能に考えました: のように、[マチュピチュの遺跡](https://en.wikipedia.org/wiki/Machu_Picchu)ペルーまたは最新の日で[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)イタリア-右から独自のリビング ルーム。</span><span class="sxs-lookup"><span data-stu-id="e5e94-108">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="e5e94-109">私たちのチームが作成する「ことが本当にいる気分を」HoloTour の目的は、</span><span class="sxs-lookup"><span data-stu-id="e5e94-109">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="e5e94-110">画像またはビデオだけにするために必要なの経験。</span><span class="sxs-lookup"><span data-stu-id="e5e94-110">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="e5e94-111">一意の表示、追跡、および HoloLens のオーディオのテクノロジを活用することで別の場所にする事実上トランスポート私たちでしたと考えられています。</span><span class="sxs-lookup"><span data-stu-id="e5e94-111">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="e5e94-112">カフェ_オレ、サウンド、およびすべての場所にアクセスして、アプリ内で再作成することの 3 次元の geometry をキャプチャする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-112">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="e5e94-113">これを行うには、360 ° カメラありました方向オーディオ キャプチャを発すます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-113">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="e5e94-114">これは、映像は、HoloLens で再生するときに鮮明になり、成果物の作成を最小限に抑えるために近くに配置する、カメラになるように、非常に高解像度でキャプチャする必要。</span><span class="sxs-lookup"><span data-stu-id="e5e94-114">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="e5e94-115">完全な球体カバレッジ、近い将来、に沿ってだけでなくが上下するも考えました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-115">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="e5e94-116">リモート テスト マシン群の世界中に取得できます。 ように移植可能な場合にも必要です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-116">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="e5e94-117">使用可能な市販のオプションを評価して実現だけ十分ビジョン – 解像度、コスト、またはサイズのためにされませんでした。</span><span class="sxs-lookup"><span data-stu-id="e5e94-117">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="e5e94-118">ニーズを満たすカメラ rig が見つからない場合に自分たちの 1 つのビルドになります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-118">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="e5e94-119">リモート テスト マシン群の構築</span><span class="sxs-lookup"><span data-stu-id="e5e94-119">Building the rig</span></span>

<span data-ttu-id="e5e94-120">最初のバージョン-ダクト テープ、および 14 GoPro カメラの cardboard、Velcro から行われる-マクガイバーを誇りに思っていたものでした。</span><span class="sxs-lookup"><span data-stu-id="e5e94-120">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="e5e94-121">カスタム製造リモート テスト マシン群をローエンド ソリューションからすべてのものを確認するには後、GoPro カメラが最終的に私たちにとって最適なオプションが小さな、低コスト、使いやすいメモリ ストレージを必要があるので。</span><span class="sxs-lookup"><span data-stu-id="e5e94-121">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="e5e94-122">カメラをかなり近くに配置することが許可されているため、フォーム ファクターは小さいが特に重要ですが、カメラの間、小さい方の距離をつなぎ合わせること、小さい方の成果物になります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-122">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="e5e94-123">一意のカメラの配置では、完全な球体カバレッジを取得できました。 *plus*十分な重複をインテリジェントにカメラを配置して、作成プロセス中に、一部のアイテムを滑らかにします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-123">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="e5e94-124">利用、[空間サウンド](spatial-sound.md)HoloLens の機能が実際に没入型エクスペリエンスを実現するのには重要です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-124">Taking advantage of the [spatial sound](spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="e5e94-125">4 つの方向で、カメラの位置から音がキャプチャは、三脚にカメラの下に設置されている 4 マイク配列を使用すると、当社のシーンでの空間のサウンドを作成するのに十分な情報を提供すること。</span><span class="sxs-lookup"><span data-stu-id="e5e94-125">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![この 360 ° カメラ リモート テスト マシン群は、映画、Pantheon の外部を設定します。](images/camera-pantheon-200px.png)

<span data-ttu-id="e5e94-127">この 360 ° カメラ リモート テスト マシン群は、映画、Pantheon の外部を設定します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-127">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="e5e94-128">テストしました、見せびらかしリモート テスト マシン群をシアトル、ほぼ Rattlesnake ねじ山最大にすることによって、ハイキングの上部にある風景をキャプチャします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-128">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="e5e94-129">結果、洗練 HoloTour で今日では、「場所よりも大幅にもくれました、リモート テスト マシン群デザイン十分にある本当にいる気分を信頼します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-129">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="e5e94-130">カメラの 3D 印刷ハウジングに Velcro と cardboard から、リモート テスト マシン群をアップグレードし、バッテリの管理を簡略化 GoPro カメラの外部のバッテリ パックを購入します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-130">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="e5e94-131">実行したより広範なテストでは、都市の海岸と象徴的なゴールデン ゲート ブリッジのミニチュア ツアーを作成する San Francisco まで移動します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-131">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="e5e94-132">このカメラのリモート テスト マシン群では、HoloTour にアクセスする場所のキャプチャのほとんどの場合です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-132">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![映画マチュピチュの 360 ° カメラ装置です。](images/camera-machu-pichu-500px.png)

<span data-ttu-id="e5e94-134">映画マチュピチュの 360 ° カメラ装置です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-134">The 360° camera rig filming in Machu Picchu.</span></span> 


## <a name="behind-the-scenes"></a><span data-ttu-id="e5e94-135">しくみ</span><span class="sxs-lookup"><span data-stu-id="e5e94-135">Behind the scenes</span></span>

<span data-ttu-id="e5e94-136">映画、前にために必要する場所をかったに含める仮想ツアーで。</span><span class="sxs-lookup"><span data-stu-id="e5e94-136">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="e5e94-137">最初の場所を出荷するためのものでローマ、させるトリップを事前に実行することにしましたので、取得します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-137">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="e5e94-138">6 人のチームに送信しました: アーティスト、デザイナー、プロデューサーなど — 検討しましたが、サイトに、人の訪問します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-138">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="e5e94-139">旅行には、約 9 日 – 出張、映画の残りの部分の 2.5 がかかりました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-139">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="e5e94-140">(マチュピチュのしましたしない scout 乗車で事前に調査して、映画のバッファーのいくつかの日を予約します。)</span><span class="sxs-lookup"><span data-stu-id="e5e94-140">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="e5e94-141">中には、ローマ、チームは、各領域の撮影し、上の考慮事項と同様に興味深いことに注意して、各スポットがいかに難しいと移動するが難しいなどとなります。 フィルムに観衆または制限のため。</span><span class="sxs-lookup"><span data-stu-id="e5e94-141">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="e5e94-142">これは、休暇ように思えるかもしれませんが、多くの作業です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-142">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="e5e94-143">日は朝の早い段階で開始され、仮に無停止夕方までです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-143">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="e5e94-144">毎晩、確認をシアトルに戻り、チームの映像がアップロードされました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-144">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![ローマ キャプチャ クルーは、します。](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="e5e94-146">ローマ キャプチャ クルーは、します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-146">Our capture crew in Rome.</span></span> 


<span data-ttu-id="e5e94-147">Scout のトリップが完了した後、最終的なプランは実際の映画の行われました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-147">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="e5e94-148">これにより、場所つもりでしたが、フィルムへのどの日で、どの時間の詳細な一覧が必要です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-148">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="e5e94-149">これらのトリップを効率的に必要です高価では毎日海外です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-149">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="e5e94-150">役立つガイドおよびローマでハンドラーを予約し、完全に終了した後の日の出前に、から毎日を使用します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-150">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="e5e94-151">実際にはそこにいる気分するようにするために可能な最適な映像を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-151">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="e5e94-152">ビデオのキャプチャ</span><span class="sxs-lookup"><span data-stu-id="e5e94-152">Capturing the video</span></span>

<span data-ttu-id="e5e94-153">キャプチャ中に、いくつかの単純な操作を実行すると、後処理がはるかに簡単です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-153">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="e5e94-154">たとえば、複数のカメラから画像を合成するたびに最終的に visual アーティファクトを含む各カメラが若干異なるビュー。</span><span class="sxs-lookup"><span data-stu-id="e5e94-154">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="e5e94-155">カメラのうち、大きい方に、ビューの違いは、近くのオブジェクトと作成の成果物は大きくなります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-155">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="e5e94-156">この問題を視覚化する簡単な方法を次に示します: の文字盤の前に、thumb を保持し、1 つだけの目で見ています。</span><span class="sxs-lookup"><span data-stu-id="e5e94-156">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="e5e94-157">目を切り替えるようになりました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-157">Now switch eyes.</span></span> <span data-ttu-id="e5e94-158">親指がバック グラウンドの基準とした移動が表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-158">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="e5e94-159">文字盤からさらに、thumb テストは反復して、以下を移動する親指が表示されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-159">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="e5e94-160">その明らかな移動の作成の問題に似ていますが直面しています。当社のカメラのように、目を少し距離で分離されているため、同じイメージが表示されません。</span><span class="sxs-lookup"><span data-stu-id="e5e94-160">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="e5e94-161">簡単に処理後にこれらを修正するよりも、映画の中に最悪の成果物を防ぐため、拡大オブジェクト内の合成する必要性を取り除くことができます希望のカメラから遠人や物を保持しようとしました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-161">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="e5e94-162">カメラの周囲の大規模な消去の維持がおそらく必要がある撮影中に最も大きな課題の 1 つと、動作させるのにはクリエイティブを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-162">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="e5e94-163">ローカルのガイドを使用した作業が、群衆の管理に非常に便利であるを使用して署名することもが見つかりました: も小さなコーンや bean バッグ — filming、スペースをマークする合理的が有効であった、各場所で映像の短い時間を取得する必要のみので特にします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-163">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="e5e94-164">多くの場合、適切なキャプチャを取得する最善の方法は、朝のほとんどの人を表示する前に、非常に早い段階で到着しただけでした。</span><span class="sxs-lookup"><span data-stu-id="e5e94-164">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="e5e94-165">その他のいくつかの便利なキャプチャ手法は、従来のフィルムのプラクティスから直接取得されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-165">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="e5e94-166">たとえば、テクスチャと後で必要な場合がありますオブジェクトの写真をキャプチャされた参照と、カメラのすべての色補正のカードを使用しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-166">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![ラフカット マチュピチュ色補正のカードを表示します。](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="e5e94-168">合成する前に Pantheon の映像の大まかなカットされます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-168">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="e5e94-169">ビデオの処理</span><span class="sxs-lookup"><span data-stu-id="e5e94-169">Processing the video</span></span>

<span data-ttu-id="e5e94-170">最初の手順は、360 ° のコンテンツをキャプチャ、HoloTour に最終資産にキャプチャした生のカメラの映像を変換する多くの処理が必要です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-170">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="e5e94-171">でした。 バックアップと 14 のさまざまなカメラからビデオを実行する必要がありましたホーム フィードに最小限のアーティファクトを含む 1 つの継続的なビデオ。</span><span class="sxs-lookup"><span data-stu-id="e5e94-171">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="e5e94-172">アート チームを結合し、キャプチャされた映像をポーランド語、多数のツールを使用して、可能な限りの処理を最適化するためのパイプラインを開発しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-172">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="e5e94-173">映像は、修正し、混乱の元の要素と成果物を削除するか、寿命と動き、実際に存在するのには、その感情を強化するという目的を含むすべての補足のポケットを追加するには、複合、色を合成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-173">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![合成する前に Pantheon の映像の大まかなカットされます。](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="e5e94-175">合成する前に Pantheon の映像の大まかなカットされます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-175">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="e5e94-176">呼ばれるツールを使用して、ビデオを合成して、 [PTGui](http://www.ptgui.com/)処理パイプラインに統合されています。</span><span class="sxs-lookup"><span data-stu-id="e5e94-176">To stitch the videos together, we used a tool called [PTGui](http://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="e5e94-177">処理後の一部としては、ビデオからまだフレームを抽出し、それらのフレームのいずれかの良さの作成パターンを検出します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-177">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="e5e94-178">微調整するビデオ、アーティストを許可され、後の効果の合成中に直接作成パターンを調整すれば、作成したカスタム プラグインにも、このパターンを適用します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-178">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![スクリーン ショットの PTGui 継ぎ合わせた Pantheon 映像を表示します。](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="e5e94-180">スクリーン ショットの PTGui 継ぎ合わせた Pantheon 映像を表示します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-180">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="e5e94-181">ビデオ再生</span><span class="sxs-lookup"><span data-stu-id="e5e94-181">Video playback</span></span>

<span data-ttu-id="e5e94-182">映像の処理が完了した後、シームレスなビデオがあることが非常に大きな-約 8 K 解像度。</span><span class="sxs-lookup"><span data-stu-id="e5e94-182">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="e5e94-183">ビデオのデコードが高コストと、次の課題は、HoloLens に戻り、このビデオを再生する方法を見つけることでしたので、8 K のビデオを処理できる非常にほとんどのコンピューターがありません。</span><span class="sxs-lookup"><span data-stu-id="e5e94-183">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="e5e94-184">私たちは、さまざまな同時に、ユーザーの外観全体を表示していたようなビデオのデコードのコストを回避するための戦略を開発しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-184">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="e5e94-185">最も簡単な最適化では、ほとんど変更されない、ビデオの一部をデコードすることを回避します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-185">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="e5e94-186">各シーンをほとんどまたはまったくないモーションを持つ領域を識別するためのツール作成しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-186">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="e5e94-187">それらのリージョンの紹介ビデオをデコードするのではなく、静的なイメージを各フレーム。</span><span class="sxs-lookup"><span data-stu-id="e5e94-187">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="e5e94-188">これを可能にするには、するには、はるかに小さいチャンクに大量のビデオを分割されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-188">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="e5e94-189">行いましたデコードされたすべてのピクセルが最も効果的に使用されたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-189">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="e5e94-190">ビデオ; のサイズを小さく圧縮方法で実験しましたに、投影、ジオメトリの多角形に従ってビデオの領域を分割しましたUv を調整し、含まれている量の詳細別ポリゴンに基づいてビデオを再パックするしました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-190">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="e5e94-191">この作業の結果を 1 つ 8 k ビデオ検索をシーンに正しく再予測されるまでにほぼ判読できない多くのチャンク単位に変換として何を開始します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-191">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="e5e94-192">テクスチャ マッピングと UV パッキングを理解しているゲーム開発者が、これはおそらくは見覚え。</span><span class="sxs-lookup"><span data-stu-id="e5e94-192">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![最適化する前に Pantheon の完全なビュー。](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="e5e94-194">最適化する前に Pantheon の完全なビュー。</span><span class="sxs-lookup"><span data-stu-id="e5e94-194">A full view of the Pantheon before optimizations.</span></span> 


![ビデオ再生の処理、Pantheon の右半分です。](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="e5e94-196">ビデオ再生の処理、Pantheon の右半分です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-196">The right half of the Pantheon, processed for video playback.</span></span> 


![最適化と梱包の後に 1 つのビデオ領域の例です。](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="e5e94-198">最適化と梱包の後に 1 つのビデオ領域の例です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-198">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="e5e94-199">使用して別の面倒なはアクティブに表示していないビデオのデコードを回避するためにします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-199">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="e5e94-200">HoloTour 中に、特定の時点で、完全なシーンの部分をのみ参照してくださいことができます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-200">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="e5e94-201">ここだけ内または間もなく、視野 (FOV) 外部のビデオをデコードします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-201">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="e5e94-202">頭を回転させると、FOV れるので、内に存在しなくなったものの再生を停止するビデオの領域の再生を開始しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-202">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="e5e94-203">これが発生しているが、急速の周囲にする場合、ビデオでは、2 つ目を開始するが表示されますが、ほとんどの人にことにさえ気付きません: それまでは準備が整ったら、どの、フェードがビデオにバックアップに静的な画像が表示されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-203">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="e5e94-204">この戦略を動作させる、広範なビデオ再生システムを開発しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-204">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="e5e94-205">行うビデオの切り替えを非常に効率的なために低レベルの再生のコードを最適化しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-205">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="e5e94-206">さらに、いつでも任意のビデオに迅速に切り替えるを可能にする特別な方法で、ビデオをエンコードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-206">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="e5e94-207">この再生パイプラインでは、段階的に実装しましたので開発時間の長い時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-207">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="e5e94-208">、効率が悪くよりシンプルなシステムが、許可されているデザイナーやアーティスト、エクスペリエンスと緩やかに変化させるには、最終的な品質バーを提供することを許可されている、より堅牢な再生システムを改善します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-208">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="e5e94-209">この最終的なシステムでは、モニター、再生エンジンとシーン内でビデオを設定する Unity 内で作成したカスタムのツールがありました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-209">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="e5e94-210">3D の領域の近くのオブジェクトを再作成</span><span class="sxs-lookup"><span data-stu-id="e5e94-210">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="e5e94-211">ビデオ HoloTour に表示される内容の大部分を占めるが Piazza Navona での描画など、Pantheon で、または、航空写真のシーン スタンド アロン バルーンの外部噴水、近くに表示する 3D オブジェクトのいくつか。</span><span class="sxs-lookup"><span data-stu-id="e5e94-211">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="e5e94-212">これらの 3D オブジェクトは、離れた奥行きの人間の知覚は閉じるを非常に良いため重要ですが、それほど優れていませんです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-212">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="e5e94-213">そんなにビデオとの距離が、領域と命令することが本当に感じまでわざわざ行かずにユーザーを許可するのには、近くにあるオブジェクトは、深さを必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-213">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="e5e94-214">この手法は、自然の歴史博物館で表示されることの並べ替えに似ています —、フォア グラウンドで物理造園、プラント、および animal の見本をあるが、バック グラウンドでマスク巧妙マット描画に遠ざかります diorama を描きます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-214">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="e5e94-215">一部のオブジェクトは、単に 3D アセットを作成し、エクスペリエンスを強化するために、シーンに追加します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-215">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="e5e94-216">ペイント ツールや、バルーンは、このカテゴリに分類撮影時に存在していないためです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-216">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="e5e94-217">ゲーム アセットと同様に、それらによって作成私たちのチームの 3D アーティストされ、テクスチャを適切にします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-217">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="e5e94-218">所在地の近くのシーンでこれらを配置し、ゲーム エンジンできますそれらをレンダリング HoloLens の 2 つのディスプレイに 3D オブジェクトとして表示されるようにします。</span><span class="sxs-lookup"><span data-stu-id="e5e94-218">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="e5e94-219">Pantheon では、外部噴水などの他の資産が存在する、ビデオ撮影している場所の場所でこれらのオブジェクトからビデオを 3D に実際のオブジェクト、私たちには、さまざまな処理を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-219">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="e5e94-220">最初に、各オブジェクトに関する追加情報必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5e94-220">First, we need additional information about each object.</span></span> <span data-ttu-id="e5e94-221">私たちのチームが思っているように、多くのこれらのオブジェクトの参照の映像をキャプチャ映画の場所は中に、イメージを正確にテクスチャを再作成する詳細な十分です。</span><span class="sxs-lookup"><span data-stu-id="e5e94-221">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="e5e94-222">また、チームが実行を[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)スキャン、2 D 画像は、多数の 3D モデルを構築する最適な規模でのオブジェクトの大まかなモデルを提供します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-222">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="e5e94-223">映像を処理すると、3 D の表現と後で置き換えられるオブジェクトは、ビデオから削除されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-223">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="e5e94-224">3D の資産が photogrammetry モデルに基づくがクリーンアップされ、によって、アーティスト、簡略化します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-224">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="e5e94-225">一部のオブジェクトについては、ビデオの部分を使用できます: water テクスチャ、噴水のなど — が若のほとんどが、3 D オブジェクト、深さを認識し、エクスペリエンスの限られたスペース内にその周りをウォークすることができます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-225">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="e5e94-226">このような領域の近くのオブジェクトを大幅に使うことでは、リアリティの意味に追加し、仮想の場所で、ユーザーを地上に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-226">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![泉と pantheon の映像が削除されます。](images/object-removal-pantheon-500px.png)

<span data-ttu-id="e5e94-229">泉と pantheon の映像が削除されます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-229">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="e5e94-230">3D アセットが置き換えされます。</span><span class="sxs-lookup"><span data-stu-id="e5e94-230">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="e5e94-231">まとめ</span><span class="sxs-lookup"><span data-stu-id="e5e94-231">Final thoughts</span></span>

<span data-ttu-id="e5e94-232">当然ながらが詳細に説明したよりも、このコンテンツを作成します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-232">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="e5e94-233">いくつかのシーンがある-「不可能なパースペクティブ」と呼んでたい — 空気バルーンの乗車と、gladiator がいっそうクリエイティブなアプローチを採用すると、Colosseum で対策を含むです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-233">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="e5e94-234">将来のケース スタディでは、これらに対処します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-234">We'll address these in a future case study.</span></span>

<span data-ttu-id="e5e94-235">ソリューションを実稼動中にありましたの大きな課題のいくつかの共有が他の開発者に役立つとこれらの手法の一部を使用して、HoloLens の独自の没入型エクスペリエンスを作成するひらめいたすることと思います。</span><span class="sxs-lookup"><span data-stu-id="e5e94-235">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="e5e94-236">(上の私たちと共有することを確認してください、行った場合と、 [HoloLens アプリ開発フォーラム](https://forums.hololens.com/)!)</span><span class="sxs-lookup"><span data-stu-id="e5e94-236">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="e5e94-237">著者について</span><span class="sxs-lookup"><span data-stu-id="e5e94-237">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e5e94-238"><b>David Haley</b>シニア開発者カメラ リモート テスト マシン群とビデオの再生についての彼と考え HoloTour での操作よりも詳細説明しました。</span><span class="sxs-lookup"><span data-stu-id="e5e94-238"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e5e94-239"><b>Danny Askew</b>はビデオのアーティスト、ローマ体験が可能な限り、完璧なことを確認します。</span><span class="sxs-lookup"><span data-stu-id="e5e94-239"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e5e94-240"><b>Jason Syltebo</b>に戻る場合でも、アクセスするすべての宛先の soundscape に発生する可能性があることを確認したオーディオ デザイナーです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-240"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e5e94-241"><b>Travis Steiner</b>調査し scouted 場所、旅行の計画を作成、およびサイトで映画を指示するデザインのディレクターです。</span><span class="sxs-lookup"><span data-stu-id="e5e94-241"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="e5e94-242">関連項目</span><span class="sxs-lookup"><span data-stu-id="e5e94-242">See also</span></span>
* [<span data-ttu-id="e5e94-243">ビデオ:Microsoft HoloLens の場合:HoloTour</span><span class="sxs-lookup"><span data-stu-id="e5e94-243">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
