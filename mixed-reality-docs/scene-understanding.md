---
title: シーンの理解
description: HoloLens のシーンと機能の概要
author: szymons
ms.author: szymons
ms.date: 07/08/19
ms.topic: article
keywords: シーンの理解、空間マッピング、Windows Mixed Reality、Unity
ms.openlocfilehash: fc77126958c653cac2d82f02cceeed9a29bffdf4
ms.sourcegitcommit: c4c293971bb3205a82121bbfb40d1ac52b5cb38e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/10/2019
ms.locfileid: "68941219"
---
# <a name="scene-understanding"></a>シーンの理解

シーンについて理解することで、さまざまな環境に対応したアプリケーションの開発を直感的に行うことができるように設計された、構造化された高レベルの環境表現を利用できます。 シーンを理解することは、これを実現するために、非常に精度の低い構造化された[空間マッピング](spatial-mapping.md)や新しい AI 駆動型ランタイムなど、既存の mixed reality ランタイムの力を組み合わせることによって実現します。 これらのテクノロジを組み合わせることで、シーンの理解によって、Unity や ARKit/Arkit などのフレームワークで使用されているような3d 環境の表現が生成されます。 シーンを理解するエントリポイントは、新しいシーンを計算するためにアプリケーションによって呼び出されるシーンオブザーバーで始まります。 現在、このテクノロジでは、3つの独立した関連オブジェクトカテゴリが生成されています。これは、単純化された watertight 環境メッシュで、煩雑なことなく平面の部屋構造を推測し、四角形を呼び出す位置に平面領域を作成し、スナップショット[を作成します。](spatial-mapping.md)サーフェイスに配置される四角形/Watertight データと一致する空間マッピングメッシュ。

![空間マッピングメッシュ, ラベル付き平面サーフェス, watertight メッシュ](images/SUScenarios.png)

このドキュメントでは、シナリオの概要を説明し、シーンの理解と空間マッピングの共有の関係を明確にすることを目的としています。 シーンの理解とその開発方法の詳細については、「シーンについて[SDK の概要](scene-understanding-SDK.md)」を参照してください。

## <a name="device-support"></a>デバイスのサポート

<table>
<tr>
<th>機能</th><th style="width:150px"> <a href="hololens-hardware-details.md">HoloLens (第 1 世代)</a></th><th style="width:150px">HoloLens 2</th><th style="width:150px"> <a href="immersive-headset-hardware-details.md">イマーシブ ヘッドセット</a></th>
</tr><tr>
<td> シーンの理解</td><td style="text-align: center;">️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"></td>
</tr>
</table>

## <a name="common-usage-scenarios"></a>一般的な使用シナリオ

![一般的な空間マッピングの使用シナリオの図:配置、遮蔽、物理、およびナビゲーション](images/sm-concepts-1000px.png)

環境に対応するアプリケーション (配置、閉鎖、物理など) の主要なシナリオの多くは、空間マッピングとシーンの理解の両方でアドレス指定できます。このセクションでは、これらの違いについて説明します。 シーンの理解と空間マッピングの主な違いは、構造と簡潔さの最大の精度と待機時間のトレードオフです。 アプリケーションが可能な限り最短の待機時間を必要とし、メッシュトライアングルを必要とする場合は、空間マッピングに直接アクセスします。ただし、高いレベルの処理を実行している場合は、シーン認識モデルに切り替えることを検討してください。では、機能のスーパーセットを提供する必要があります。 また、シーンの理解によって空間マッピングメッシュが表現の一部として提供されるため、可能な限り完全かつ正確な空間マッピングデータに常にアクセスできることに注意してください。

 次のセクションでは、新しいシーンの概要 SDK のコンテキストにおける主要な空間マッピングのシナリオについて説明します。

### <a name="placement"></a>配置

シーンの理解は、配置シナリオを簡略化するために特別に設計された新しい構造を提供します。 シーンでは、ホログラムを配置できるフラットサーフェスを記述する SceneQuads と呼ばれるプリミティブを計算できます。 SceneQuads は、特に配置を中心に設計されており、2D サーフェイスを記述し、そのサーフェイス上に配置するための API を提供しています。 以前は、トライアングルメッシュを使用して配置を実行する場合、オブジェクトの配置の適切な場所を識別するために、クワッドのすべての領域をスキャンし、穴の塗りつぶし/後処理を実行する必要がありました。 これは、四角形では常に必要となるわけではありません。これは、実行時には、スキャンされなかったクワッドの領域を推定することができ、サーフェイスの一部ではない四角形の領域を無効にすることができるためです。

![推定が無効になっている SceneQuads。スキャンされたリージョンの配置領域をキャプチャします。](images/SUQuads.png)
##### <a name="1-scenequads-with-inference-disabled-capturing-placement-areas-for-scanned-regions"></a>[1] "SceneQuads で推定が無効になりました。スキャンされたリージョンの配置領域をキャプチャしています。"

![推論が有効になっている四角形は、スキャンされた領域に限定されなくなりました。](images/SUWatertight.png)
##### <a name="2-quads-with-inference-enabled-placement-is-no-longer-limited-to-scanned-areas"></a>[2] "推論が有効になっている四角形、配置はスキャンされた領域に制限されなくなりました。"

アプリケーションで、環境の固定構造に2D または3D のホログラムを配置する場合は、配置のための SceneQuads の単純さと利便性が、Surface メッシュからのこの情報の計算に適しています。 このトピックの詳細については、「[シーンについての SDK リファレンス](scene-understanding-SDK.md)」を参照してください。

**メモ**Surface メッシュに依存するレガシコードの場合、SceneQuads と共に空間マッピング出力を含むシーンを計算して、配置のレガシ要件を確実に維持することができます。 メッシュデータを理解するシーンがアプリケーションの待機時間の要件を満たしていない場合は、ここに記載されている空間マッピング Api を引き続き使用することをお勧めします。[空間マッピングの配置](spatial-mapping.md#placement)

### <a name="occlusion"></a>オクルージョン

[空間マッピングオクルージョン](spatial-mapping.md#occlusion)は、環境のリアルタイム状態をキャプチャするための最も低い方法にとどまります。 これは、高度に動的なシーンで遮蔽を提供するのに便利な場合がありますが、いくつかの理由から、遮蔽のシーンの理解を考慮することをお勧めします。 シーンの理解によって生成される空間マッピングメッシュを使用する場合は、ローカルキャッシュに格納されないため、認識 Api からは利用できされないように、空間マッピングからデータを要求できます。 Watertight メッシュと共に遮蔽に空間マッピングを使用すると、追加の値が提供されます。特に、スキャンされていない部屋の構造が完了します。

シーンの理解の待機時間の増加に合わせて要件が許容できる場合、アプリケーション開発者は、シーンについて理解する watertight メッシュを使用することを検討する必要があります。また、空間マッピングメッシュは平面表現と連携していると考えられます。 これにより、最も現実的なオクルージョンマップを提供できる、より細かい nonplanar geometry を使用して、watertight オクルー・・・・・・・・・・・・・・・・・・・・・・・の

### <a name="physics"></a>物理

シーンの理解によって、サーフェイスメッシュによって発生する物理の多くの制限に対処するためのセマンティクスを使用して領域を分解する watertight メッシュが生成されます。 Watertight 構造体は、物理的な光のキャストを常にヒットさせると共に、セマンティック分解によって、室内ナビゲーションのナビゲーションメッシュをより簡単に生成できます。 EnableSceneObjectMeshes を使用したシーンの作成と EnableWorldMesh に関する[オクルージョン](#occlusion) セクションで説明したように、最も物理的に完全なメッシュが可能になります。 環境メッシュの watertight プロパティを使用すると、ヒットテストがサーフェイスのヒットに失敗するのを防ぐことができます。また、メッシュデータは、領域構造だけでなく、シーン内のすべてのオブジェクトと対話することを保証します。

### <a name="navigation"></a>ナビゲーション

セマンティッククラスによって分解された平面メッシュは、ナビゲーションとパスの計画に最適な構成要素であり、「[空間マッピングのナビゲーション](spatial-mapping.md#navigation)の概要」で説明されている多くの問題を緩和します。 シーンで計算された SceneMesh オブジェクトは、既に表面の種類によって構成解除されており、ナビゲーションメッシュの生成が、ウォーク可能なサーフェイスに限定されます。 フロア構造は単純であるため、Unity などの3d エンジンでの動的ナビゲーションメッシュ生成は、リアルタイムの要件に応じて達成できます。

現在でも正確なナビゲーションメッシュを生成するには後処理が必要です。つまり、アプリケーションでは、移動が乱雑またはテーブルを通過しないように、フロアに occluders を投影する必要があります。これを実現する最も正確な方法は、EnableWorldMesh フラグを使用してシーンが計算された場合に提供される世界のメッシュデータを射影することです。

### <a name="visualization"></a>可視化

[空間マッピングの視覚化](spatial-mapping.md#visualization)を使用して、環境のリアルタイムのフィードバックを行うことができますが、平面オブジェクトと watertight オブジェクトの単純化によってパフォーマンスや視覚品質が向上する多くのシナリオがあります。 四角形または平面 watertight メッシュによって提供される平面サーフェスに射影した場合、空間マッピングを使用して記述されているシャドウプロジェクションとアース手法は、より見栄えが良い場合があります。 これは、シーンが推測されることが原因で事前スキャンが最適ではない環境やシナリオでは特に当てはまり、完全な環境と平面の前提条件によって成果物が最小化されます。

さらに、空間マッピングによって返されるサーフェスの合計数は、内部空間キャッシュによって制限されます。一方、シーン認識のバージョンの空間マッピングメッシュは、キャッシュされていない空間マッピングデータにアクセスできます。 このため、シーンを理解することは、視覚エフェクトやさらにメッシュ処理を行うために、より大きなスペース (たとえば、1つの部屋を超える) のメッシュ表現をキャプチャする場合に適しています。 EnableWorldMesh で返されるワールドメッシュの詳細レベルは、全体にわたって一貫しています。これにより、ワイヤーフレームとしてレンダリングした場合により良い視覚化が得られる可能性があります。

### <a name="see-also"></a>関連項目

* [シーンを理解する SDK](scene-understanding-SDK.md)
* [空間マッピング](spatial-mapping.md)
