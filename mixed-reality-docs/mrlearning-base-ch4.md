---
title: MR Learning ベースのモジュールの 3D オブジェクトの相互作用
description: このコースでは、複合現実のアプリケーション内で Azure の顔認識機能を実装する方法について説明します。
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
ms.localizationpriority: high
keywords: 複合現実、unity、チュートリアル、hololens
ms.openlocfilehash: 45e772de0825fe2161f880a165d6c75c755b849e
ms.sourcegitcommit: 1c0fbee8fa887525af6ed92174edc42c05b25f90
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/16/2019
ms.locfileid: "65730905"
---
# <a name="mr-learning-base-module---3d-object-interaction"></a>MR Learning ベースのモジュールの 3D オブジェクトの相互作用

このレッスンでが、基本的な 3D コンテンツとユーザー エクスペリエンス経由します。 私たちは、コレクションの一部として 3D オブジェクトを整理、境界ボックスの基本的な操作について説明します、ほぼとの相互作用について説明しますとタッチについて説明します、および追跡の手でジェスチャを取得する方法について説明します。 

## <a name="objectives"></a>目標

* MRTK の Grid オブジェクトのコレクションを使用して 3D コンテンツを整理する方法について説明します
* 境界ボックスを実装します。
* 3D オブジェクトの基本的な操作 (移動、回転、および拡大縮小) を構成します。
* Near との相互作用を探索します。
* 追加の手をグラブし、タッチなどのジェスチャの追跡について説明します

## <a name="instructions"></a>手順

### <a name="organizing-3d-objects-in-a-collection"></a>コレクション内の 3D オブジェクトを整理します。

1. 階層を右クリックしを選択、「作成空」です。 これは、空のゲーム オブジェクトを作成します。 "3DObjectCollection"に変更します これはすべて、3 D オブジェクトの保存場所です。 コレクションの位置を x に設定してください = 0、y = 0、および z = 0。

![Lesson4 第 1 章 Step1im](images/Lesson4_Chapter1_step1im.PNG)

2. カスタム パッケージをインポートするのと同じ手順が記載 BaseModule 資産を使用してインポート[レッスン 1 から](mrlearning-base-ch1.md)します。 BaseModule 資産には、3 D のモジュールとこのチュートリアル全体で使用されるその他の便利なスクリプトが含まれます。 BaseModule unity パッケージはここにあります。 <https://github.com/Microsoft/MixedRealityLearning/releases/tag/V1.1>

3. コーヒー カップのプレハブは、その横にある青色の立方体で認識されないことができます。 青の cube および小規模のホワイト ペーパー (示す元の 3D モデルとプレハブではありません。) で、コーヒー カップは選択しないでください。 

![Lesson4 第 1 章 Noteaim](images/Lesson4_chapter1_noteaim.PNG)

4. 手順 1 から"3DObjectCollection"ゲーム オブジェクトに好きなコーヒー カップのプレハブをドラッグします。 コーヒー カップはコレクションの子であるようになりました。

![Lesson4 第 1 章 Step4ima](images/Lesson4_chapter1_step4ima.PNG)

5. 次に、3 D オブジェクト、シーンに追加します。 この例で追加するオブジェクトの一覧を次に示します。 オブジェクトを追加すると、さまざまなサイズで、シーンに表示されることがあります。 Inspector パネルの 変換の設定では各 3D モデルのスケールを調整します。 この例では、推奨される調整は、次のオブジェクトを一覧表示されます。 [プロジェクト] パネルで検索ボックスにこれらの単語を検索し、前の手順と同様に、"3DObjectCollection"オブジェクトに 3D オブジェクトのプレハブをドラッグします。 アセットのプレハブのこれらのコレクションが表示されます > BaseModuleAssets > ベースのモジュールのプレハブ
- "TheModule_BaseModuleIncomplete"を検索 シーンにドラッグします。 X にスケールを設定 = 0.03、y = 0.03、z = 0.03 です。 
- "Octa_BaseModuleIncomplete"を検索 シーンにドラッグします。 X にスケールを設定 0.13 を = です。 y = $0.13、z = $0.13 します。
- "EarthCore_BaseModuleIncomplete"を検索 シーンにドラッグします。 X にスケールを設定 50.0 = y = 50.0、z = 50.0 します。
- "Cheese_BaseModuleIncomplete"を検索 シーンにドラッグします。 X にスケールを設定、0.05 = y = 0.05、z = 0.05 します。
- "Model_Platonic_BaseModuleIncomplete"を検索 シーンにドラッグします。 X にスケールを設定 = $0.13、y = $0.13、z = $0.13 します。
- "CoffeeCup_BaseModuleIncomplete"を検索 シーンにドラッグします。

![Lesson4 第 1 章 Step5im](images/Lesson4_Chapter1_step5im.PNG)

6. 3 つのキューブをシーンに追加します。 "3DObjectCollection"オブジェクトを右クリックし、「3 D オブジェクト」を選択し、「キューブです」を選択します X にスケールを設定 = 0.14、y = 0.14、および z 0.14 を = です。 この手順をさらに 2 回繰り返します 3 つのキューブの集計を作成します。 または、2 回、合計で 3 つのキューブのキューブを複製することがあります。 アセットから、次の 3 つの準備済みのキューブ プレハブを使用することもできます > BaseModuleAssets > モジュールのプレハブをベースと選択 GreenCube_BaseModuleIncomplete、BlueCube_BaseModuleIncomplete および OrangeCube_BaseModuleIncomplete します。

![Lesson4 第 1 章 Step6im](images/Lesson4_Chapter1_step6im.PNG)

7. 説明する手順を使用してグリッドを形成するオブジェクトのコレクションを整理[レッスン 2](mrlearning-base-ch2.md) MRTK の Grid オブジェクトのコレクションを使用します。 3 x 3 グリッドで、オブジェクトの構成の例を参照する次の図を参照してください。

![Lesson4 第 1 章 Notebim](images/Lesson4_chapter1_notebim.PNG)

>注:中心から、上の図内のオブジェクトなど一部のオブジェクトがわかります。 これは、prefabs またはオブジェクトに子オブジェクトに不整合があった可能性があるためにです。 自由にオブジェクトの位置または子オブジェクトの位置を適切にアラインされたグリッドを実現するために必要な調整を行う。


### <a name="manipulating-3d-objects"></a>3D オブジェクトを操作します。
1. キューブを操作する機能を追加します。 3D オブジェクトを操作する機能を追加するには、次の操作を行う必要があります。
-   (この例では、キューブのいずれか)、階層内を操作する 3D オブジェクトを選択します。
-   "コンポーネントの追加 をクリックします。 
-   「操作」の検索
-   「操作ハンドラー。」を選択します。
-   "3DObjectCollection"オブジェクトがありません"3DObjectCollection"下にあるすべての 3D オブジェクトの繰り返し自体。
-   すべての 3D オブジェクトが collider または足場に box collider ことを確認 (コンポーネントの追加 > コライダーのボックス)。

![Lesson4 第 2 章 Step1im](images/Lesson4_chapter2_step1im.PNG)

>操作ハンドラーは、操作しているときに、オブジェクトがどのように動作するかの設定を調整できるコンポーネントです。 これには、回転、拡大縮小、移動、および特定の軸上の移動の制約が含まれます。 

2. 1 つのキューブを制限して、拡張することのみ。 "3DObjectCollection"オブジェクトでは、1 つのキューブを選択します。 Inspector パネルで、「2 つの操作が渡される型、」の横にあるドロップダウン メニューをクリックし、「スケール」を選択します これにより、ユーザーは、キューブのサイズを変更できるだけように。

![Lesson4 第 2 章 Step2im](images/Lesson4_Chapter2_step2im.PNG)

3. 各キューブの色を変更するは、それらの間で差別化できるようにします。 
-   [プロジェクト] パネルに移動し、「MixedRealityToolkit.SDK」を参照してください。 しそれを選択するまで下へスクロールします。
-   "Standard Assets"フォルダーを選択します。
-   「マテリアル」フォルダーをクリックします。
-   各キューブには、さまざまな資料をドラッグします。 

>注:キューブの任意の色を選択できます。 たとえば、"glowingcyan"、"glowingorange"を使用するつもりは「緑」 自由に異なる色で実験できます。 キューブには、色を追加するにはの色を変更するキューブをクリックして、キューブのインスペクター ウィンドウで、メッシュ レンダラーの素材のフィールド、マテリアルをドラッグします。 

![Lesson4 第 2 章 Step3im](images/Lesson4_Chapter2_step3im.PNG)

4. "3DObjectCollection"オブジェクトで別のキューブを選択し、その動きは先頭にある修正プログラムの距離に制限されるようになります。 「移動の制約」の右側で、ドロップダウン メニューをクリックし、「先頭からの距離を修正します。」を選択します。 これによりするため、ユーザーは、そのフィールドのビジョン内のキューブにのみ移動できます。 

![Lesson4 第 2 章 Step4im](images/Lesson4_chapter2_step4im.PNG)

次のいくつかの手順の目標:グラブし、3 D オブジェクトとの対話を有効にします。 さまざまな操作の設定が適用されます。 

5. チーズ オブジェクトを選択し、[inspector] パネルで「コンポーネントを追加します」をクリックしてください 

6. 検索ボックスに"近くの対話 Grabbable"を検索し、スクリプトを選択します。 このコンポーネントにより、ユーザーに連絡し、追跡対象の手でオブジェクトを取得します。 「を許可するまでの操作」のチェック ボックスがオフになって (次の図の緑色の円で示されます)。 いない場合も、オブジェクトが許可された距離から操作するのには

![Lesson4 第 2 章 Step6im](images/Lesson4_Chapter2_step6im.PNG)

7. それらのオブジェクトに対して手順 5. と 6. を繰り返すことにより、"近くの対話 Grabbable"Octa のオブジェクト、プラトニック オブジェクト、地球のコア、旧暦モジュール、およびコーヒー カップを追加します。

8. Octa オブジェクトからは、相手側の操作の機能を削除します。 これを行うには、階層では、Octa を選択し、(緑色の円でマークされている)"相手側の操作を許可する チェック ボックスをオフにします。 これにより、ユーザーは追跡対象の手を使用して直接 octa でのみ操作できるようにします。

>注:操作ハンドラー コンポーネントの完全なドキュメントには、設定が関連付けられているを参照してください、 [MRTK ドキュメント](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_ManipulationHandler.html)します。

9. 地球のコア、および、コーヒー カップに"近くの対話 Grabbable"のコンポーネントが追加されたことを確認します (手順 7 を参照してください)。

10. 旧暦モジュールの設定を変更操作ハンドラー オブジェクトの両方の近くのセンターと、相手側との対話の周りを回転、ように次の図に示すようにします。

![Lesson4 第 2 章 Step10im](images/Lesson4_chapter2_step10im.PNG)

11:地球の主要なのリリースの動作を変更する"nothing"。 これにより、ユーザーの把握から地球 core がリリースされると、そのままにならないを移動するようにします。 

![Lesson4 第 2 章 Step11im](images/Lesson4_Chapter2_step11im.PNG)

> 注:この設定は、スローできるボールの作成などのシナリオに適しています。 速度と角度の速度を維持することになりますでリリースされた、物理ボールに動作する方法に似ていますが、速度で移動することが引き続き、ボールが解除されるようにします。

### <a name="adding-bounding-boxes"></a>境界ボックスを追加します。
境界ボックスにより、簡単と相互作用) の近くの直接の操作と ray ベースの操作 (ここまでの操作) の両方の 1 つの手でオブジェクトを操作するより直感的です境界ボックスは、スケーリングすると、特定の軸に沿ってオブジェクトを回転させるグラブできます「ハンドル」を提供します。
>注:オブジェクトに境界ボックスを追加する前にまずが必要です、コライダー オブジェクト (たとえば、ボックス collider。)このレッスンでは以前とします。 コンポーネントの追加を選択すると、オブジェクトのインスペクター パネルと、オブジェクトを選択して、コライダーを追加できる > 足場に Box Collider します。
>

1. 1 つは存在しない場合 (足場に box collider とセットアップのベース モジュール アセット フォルダーには、記載されている手順ごとのプレハブを使用する場合は必要ありません。)、地球の中核となるオブジェクトに、box collider を追加します。地球のコアの場合は必要があります、地球のコアの下にある"node_id30"オブジェクトに、足場に box collider を追加する次の図に示すようにします。 node_id30 を選択し、オブジェクトのインスペクター タブで、"コンポーネントの追加 をクリックし、box collider"を検索および 

![Lesson4 第 3 章 Step1im](images/Lesson4_Chapter3_step1im.PNG)

![Lesson4 第 3 章 Step2im](images/Lesson4_chapter3_step2im.PNG)

> 注:大きすぎるか小さすぎることがないように、足場に box collider を視覚化することを確認します。 (この例では、地球のコア) で囲むことは、オブジェクトと同じサイズを約するする必要があります。 足場に box collider コライダー [編集] オプションを選択して、必要に応じて、足場に box collider を調整します。 X、y、および z の値を変更することができますか、エディターのシーンのウィンドウで境界ボックスのハンドラーをドラッグします。 

![Lesson4 第 3 章 Noteim](images/Lesson4_Chapter3_noteim.PNG)

2. 地球 core の"node_id30"オブジェクトには、境界ボックスを追加します。 これを行うには、"3DObjectCollection"から"node_id30"オブジェクトを選択します。 Inspector タブで、"コンポーネントの追加 をクリックし、「境界ボックス」を検索 境界ボックス、足場に box collider、および操作スクリプト (相互作用 grabbable 近く操作ハンドラー) がすべて同じゲーム オブジェクト上であることを確認します。

3.  境界ボックスの「動作」のセクションでは、アクティブ化のドロップダウン リストから「開始時にアクティブ化」を選択します。 さまざまなライセンス認証オプションとその他の境界ボックスのオプションに関する詳細を確認するを参照してください、 [MRTK のドキュメンテーションの境界](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_BoundingBox.html>)

   

   *次のいくつかの手順も既定ボックス材料、それをつかんでいるが、中に、マテリアルに加えて (隅にあると、左右のハンドル) のハンドルの視覚エフェクトを調整することで、境界ボックスの外観を変更しますが。MRTK には、境界ボックスをカスタマイズするいくつかのオプションが含まれています。*

4. プロジェクト パネルで、検索すると、"boundingbox"は次の図に示すように、検索結果で青い球体で表される素材のリストが表示されます。 

5. 境界ボックス コンポーネントのボックス素材スロットに"boundingbox"マテリアルをドラッグします。 "Boundingboxgrabbed"material をグラブし、ボックスを数量単価型スロット グラブに境界ボックス コンポーネントに追加することもします。

6. 境界ボックス コンポーネントのスケール ハンドルのプレハブ スロットに"MRTK_BoundingBox_ScaleWidget"マテリアルをドラッグします。 

7. 結合のボックス コンポーネントの回転ハンドルのスロットに"MRTK_BoundingBox_RotateWidget"マテリアルをドラッグします。

![Lesson4 第 3 章手順 4 7Im](images/Lesson4_chapter3_step4-7im.PNG)

8. 境界ボックスの右側のオブジェクトが対象とすることを確認します。 境界ボックス コンポーネントでは、「ターゲットのオブジェクト」と「境界の上書き」のスクリプトです。 これらのスロットの両方にそれを囲む境界ボックスのあるオブジェクトをドラッグしてください。 この例では、次の図に示すように、"node_id30"オブジェクトをこれら両方のスロットにドラッグします。

> 開始するか、またはアプリケーションを再生するときに、オブジェクトは青枠で囲むようになりました。 オブジェクトのサイズを変更するには、そのフレームの角をドラッグすることを歓迎しています。 境界ボックスの設定 (手順 4 ~ 7 を回避できます)。 既定の使用が推奨スケーリングのハンドルと大きくなりより顕著に回転ハンドルをする場合 

![Lesson4 第 3 章 Step8im](images/Lesson4_Chapter3_step8im.PNG)

9. 既定の境界、境界ボックスのオブジェクトのインスペクター ウィンドウで、ボックスの視覚エフェクトに戻るに回転ハンドルのプレハブを選択、del キーを押します境界ボックス視覚化の下の画像のように表示されます。 注: 境界ボックスの視覚エフェクトは、再生モードの場合にのみ表示されます。

![Lesson4 第 3 章 Step9im](images/Lesson4_chapter3_step9im.PNG)

### <a name="adding-touch-effects"></a>タッチの効果を追加します。
この例では、手を使用したオブジェクトをタッチしたときにサウンド効果を再生するでしょう。

1. ゲーム オブジェクトに audio source コンポーネントを追加します。 シーンの階層構造では、"octa"オブジェクトを選択します。 Inspector パネルで、"コンポーネントの追加 ボタンをクリックします。 検索し、オーディオ ソース を選択します。 このオーディオ ソース後の手順でのサウンド効果の再生に使用します。 

>注:ために、box collider を"Octa"オブジェクトがあります。

2. 相互作用押せる"近く"コンポーネントを追加します。 「付近の押せる相互作用します。」を検索してインスペクターのパネルで、「コンポーネントの追加」ボタンをクリックします。 コンポーネントを追加することを選択します。 注: は、コンポーネントを追加してだけでなく足場に box collider の強調表示 ことを強調表示するスクリーン ショットを修正します。

>注:以前に「ほぼ相互作用 grabbable」を追加しました この間、および相互作用押せる"の"近くの違いは、"grabbable"の相互作用が、オブジェクトを取得した対話のものであります。 「押せる」のコンポーネントは、編集するオブジェクトを対象としています。 両方のコンポーネントは、相互作用の組み合わせを一緒に使用できます。

![Lesson4 第 4 章 Step1 2Im](images/Lesson4_chapter4_step1-2im.PNG)

3. 「タッチの相互作用を渡す」スクリプトに追加します。 このスクリプトは、このデモのパッケージの一部としてインポートした unity シーンに含まれることに注意してくださいし、は、元の MRTK には含まれません。 だけ、前の手順のように、"コンポーネントの追加 をクリックし、「手の形の相互作用のタッチ」を検索して追加します。 
   スクリプトを使用して 3 つのオプションがあることに注意してください。 

   - "上のタッチが完了しました。" これは、タッチ、オブジェクトを解放するとトリガーされます。 
   - 「でタッチから開始します。」 これは、オブジェクトが操作されたときにトリガーされます。 
   - "でタッチを更新します。" これは、手がオブジェクトを変更中に定期的にトリガーされます。 

   この例では、私たちは"開始タッチ"に設定で使用されます。

4. 次の図に示すように、"で開始するタッチ"オプションで「+」ボタンをクリックします。 Octa オブジェクトは、空のフィールドにドラッグします。 

5. (下の画像の緑の四角形) 上の「関数」を示すドロップダウン リスト、選択 AudioSource > PlayOneShot します。 以下の概念を使用して、このフィールドに、オーディオ クリップを追加します。

   - MRTK では、オーディオ クリップの小さな一覧を提供します。 自由に、[プロジェクト] パネルで確認できます。 "MixedRealityToolkit.SDK"フォルダーを"standard assets"フォルダーの下で表示されます。 "Audio"フォルダーのすべてのオーディオ クリップの場所が表示されます。
   - この例では、"MRTK_Gem"オーディオ クリップを使用するでしょう。 
   - オーディオ クリップを追加するに単にドラッグするクリップ プロジェクト パネルからインスペクター パネル AudioSource.PlayOneShot (上記の例で緑色のボックスでマークされている)。

   これでユーザーがに達するし、octa オブジェクトに触れて、"MRTK_Gem"のオーディオ トラックが再生されます。 「手の形の相互作用のタッチ」スクリプトの操作されたときに、オブジェクトの色が調整されます。 

![Lesson4 第 4 章の手順 3. 5 Noteim](images/Lesson4_chapter4_step3-5-noteim.PNG)

### <a name="congratulations"></a>おめでとうございます 
このレッスンでは、グリッドのコレクション内の 3D オブジェクトを整理する方法と (拡大縮小、回転、および移動)、3 D オブジェクトを操作する方法を説明しました (追跡対象の手を直接取得して) 相互作用と (注視光線または手光線を使用). ここまでの相互作用近くを使用して3D オブジェクトの周りの境界ボックスを配置する方法について説明し、使用し、境界ボックスのギズモをカスタマイズする方法について説明します。 最後に、オブジェクトに触れたときにイベントをトリガーする方法を学習しました。

[次のレッスン:高度な入力](mrlearning-base-ch5.md)

