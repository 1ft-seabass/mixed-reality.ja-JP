---
title: 座標系
description: 空間の座標系には、取り付けられていないを構築するために使用されて、継続、ルーム スケールと世界規模現実エクスペリエンスが混在します。
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
keywords: 座標系、空間座標系、方向専用、取り付けられているスケール、永続的なスケール、ルーム規模、世界規模、360 度は、取り付け、継続、ルーム、世界、スケール、位置、向き、静止、添付、ステージ、アンカー、空間のアンカー世界がロックされている、世界中のロック、本文がロックされている、本文のロックの境界、永続化、共有、クラウド空間アンカーの損失、追跡
ms.openlocfilehash: f4b945a3ffb83b9ac0a94e0d793a19939aece3bb
ms.sourcegitcommit: 17f86fed532d7a4e91bd95baca05930c4a5c68c5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/11/2019
ms.locfileid: "66829861"
---
# <a name="coordinate-systems"></a>座標系

根本的に実際にはアプリの配置を混合[ホログラム](hologram.md)外観し、思われるオブジェクトの実世界でします。 これには、正確に位置と向きの世界での世界が、物理的な場所または作成した仮想領域であるかどうかをユーザーに意味のある場所でそれらのホログラムが含まれます。 考える場合に、位置と、ホログラム、またはその他のすべてのジオメトリの向きなど、[視線](gaze.md)レイまたは[位置を渡す](gestures.md)Windows は、そのでのさまざまな実際の座標システムを提供します。呼ばれるジオメトリを表現できる**空間座標系**します。

<br>

>[!VIDEO https://www.youtube.com/embed/TneGSeqVAXQ]

## <a name="device-support"></a>デバイスのサポート

<table>
    <colgroup>
    <col width="40%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    </colgroup>
    <tr>
        <td><strong>機能</strong></td>
        <td><a href="hololens-hardware-details.md"><strong>HoloLens (第 1 世代)</strong></a></td>
        <td><strong>HoloLens 2</strong></td>
        <td><a href="immersive-headset-hardware-details.md"><strong>イマーシブ ヘッドセット</strong></a></td>
    </tr>
     <tr>
        <td><a href="coordinate-systems.md#stationary-frame-of-reference">フレームの静止した基準</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#attached-frame-of-reference">アタッチされたフレームの参照</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#stage-frame-of-reference">ステージの参照</a></td>
        <td>まだサポートされていません</td>
        <td>まだサポートされていません</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#spatial-anchors">空間アンカー</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="spatial-mapping.md">空間マッピング</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>❌</td>
    </tr>
</table>

## <a name="mixed-reality-experience-scales"></a>複合現実エクスペリエンスのスケール

さまざまなユーザー エクスペリエンス、ヘッドセットの向き、完全な世界規模のアプリとゲームで、空間マッピングと空間アンカーが必要に必要なだけ 360 度のビデオ ビューアーからの複合現実アプリを設計できます。
<br>

| エクスペリエンスのスケール | 必要条件 | 例のエクスペリエンス | 
|----------|----------|----------|
|  **印刷の向きのみ** |  **ヘッドセット向き**(重力配置) |  360 ° ビデオ ビューアー | 
|  **取り付けられているスケール** |  プラス上**ヘッドセット位置**0 の位置を基準 |  レーシング ゲームや領域シミュレーター | 
|  **永続的なスケール** |  プラス上**フロアの配信元のステージング** |  アヒルしてインプレース覆いアクション ゲーム  | 
|  **ルーム スケール** |  プラス上**ステージの境界の多角形** |  パズルのゲーム、パズルの見回りの場所 | 
|  **世界規模** |  **空間アンカー** (通常[空間マッピング](spatial-mapping.md)) |  ゲームなど、実際の壁に由来の敵を[RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j) | 

これらが発生スケール フォロー「入れ子人形」モデル。 Windows Mixed Reality をここで重要な設計原則は、特定ヘッドセットがより低いすべてのスケールと同様に、ターゲット エクスペリエンス スケール用にビルドされたアプリをサポートしていることを示します。
<br>

| 6 dof 追跡 | フロアの定義 | 360 ° の追跡 | 境界の定義 | 空間のアンカー | 最大のエクスペリエンス | 
|----------|----------|----------|----------|----------|----------|
|  X |  - |  - |  - |  - |  **印刷の向きのみ** | 
|  **はい** |  X |  - |  - |  - |  **取り付けられています** | 
|  **はい** |  **はい** |  X |  - |  - |  **お待ちの転送** | 
|  **はい** |  **はい** |  **はい** |  X |  - |  **継続の 360 °** | 
|  **はい** |  **はい** |  **はい** |  **はい** |  X |  **ルーム** | 
|  **はい** |  **はい** |  **はい** |  **はい** |  **はい** |  **世界** | 

ステージのフレームの参照がまだは HoloLens でサポートされないことに注意してください。 HoloLens のルーム スケール アプリは現在使用する必要が[空間マッピング](spatial-mapping.md)ユーザーの床面と壁を検索します。

## <a name="spatial-coordinate-systems"></a>空間座標系

すべての 3D グラフィックス アプリケーションを使用して、[デカルト座標系](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems)をレンダリングする仮想世界のオブジェクトの向きと位置を判断します。 このような座標システムは、3 つの垂直軸に沿って配置するオブジェクトの位置を確立します。 X、Y、および Z 軸。

[複合現実](mixed-reality.md)、仮想および物理の両方の座標システムに関する理由は、アプリ。 Windows の呼び出しを現実の世界で本当の意味を持つ、座標系、**空間座標系**します。

空間座標系では、メーターの座標の値を表します。 つまり、オブジェクトが 2 つのユニットを X の間隔の配置、Y または Z 軸複合現実でレンダリングした場合とは別の 2 つのメーターが表示されます。 これによりオブジェクトと現実世界規模で環境を簡単に表示できます。

一般に、デカルト座標系には、右手座標系か左手座標系ができます。 Windows では、空間座標系は、正の x 軸右を向き、(重力を配置する) 指す y 軸の正のつまり右手座標系、常に手前に正の z 軸のポイントとします。

座標系の両方の種類では、正の x 軸が右を指すし、上を向き、正の y 軸。 違いは、正の z 軸がまたは奥に向かってをポイントするかどうか。 左側または右側にある正の方向とそれらを正の Y 方向に curling X には、いずれかの本の指をポイントしてポイントを z 軸の正方向を注意してくださいことができます。 親指を指す方へ、または、奥方向は、その座標系のポイントを z 軸の正方向です。

## <a name="building-an-orientation-only-or-seated-scale-experience"></a>方向専用、または取り付けられているスケールのエクスペリエンスの構築

Holographic キー[レンダリング](rendering.md)はビューの変更、アプリのホログラムの各フレームの予測ヘッド モーションを一致するように、ユーザーが移動するとします。 ビルドすることができます**取り付けられているスケール エクスペリエンス**ヘッドのユーザーの位置およびヘッドの向きを使用してに点が変更される、**フレームの静止した基準**。

一部のコンテンツは、ヘッドの位置指定更新、選択した見出しを固定に収まってを無視する必要があり、常に、ユーザーからの距離。 主な例は、360 度のビデオ: ビデオが 1 つの固定のパースペクティブからキャプチャされると、ためには支障をきたす、コンテンツを基準に移動するビューの位置の錯覚場合でも、ユーザー次のようにビューの方向を変更する必要があります。 などをビルドする**方向のみのエクスペリエンス**を使用して、**の基準枠をアタッチ**します。

### <a name="stationary-frame-of-reference"></a>フレームの静止した基準

静止した基準枠によって提供される座標システムでは、ヘッドのユーザーの位置の変更を考慮しながら、ユーザーに近いオブジェクトの位置を世界中の基準としたできるだけ安定してください。

取り付けられているスケールのエクスペリエンス、ゲーム エンジンでなどのため[Unity](https://unity3d.com/)、静止した基準枠は、エンジンの"world origin"の定義 特定のワールド座標に配置されるオブジェクトは、これらの同じ座標を使用して実際の位置を定義するのにフレームの静止した基準を使用します。 そのまま保持は、離れても、世界では、配置のコンテンツと呼ばれる**world ロック**コンテンツ。

アプリは通常、起動時にフレームの 1 つの静止した基準を作成し、アプリの有効期間を通じての座標系を使用します。 Unity でのアプリ開発者として、ユーザーの初期ヘッドの位置と向きになると、原点からのコンテンツを配置することをすぐ開始できます。 戻しますできます、ユーザーが新しい場所に移動が取り付けられているスケール操作を続行したい場合その場所を世界の原点。

時間の経過と共にように、ユーザーの環境について、システムが増える可能性がありますを確認し、現実世界のさまざまなポイント間の距離が短いまたは信じられていたシステムよりも長いのことです。 ユーザーが、領域全体は約 5 m を超える歩き回り HoloLens 上のアプリのフレームの静止した基準でホログラムをレンダリングする場合、アプリはこれらホログラムの観察対象の場所での誤差を確認できます。 構築しているお客様のエクスペリエンスに 5 m を超える歩き回っているユーザーがある場合、[世界規模の経験](#building-a-world-scale-experience)、以下に示すようにホログラムを安定した、維持するその他の方法が必要になります。

### <a name="attached-frame-of-reference"></a>アタッチされたフレームの参照

接続されている基準は、アプリが最初に、フレームを作成するときに定義されている固定の見出しを含む、歩くユーザーと共に移動します。 これにより、ユーザーが快適その参照のフレーム内に配置されるコンテンツを確認できます。 このユーザーの相対方法でレンダリングされたコンテンツと呼ばれる**本文ロック**コンテンツ。

ヘッドセット抜け出したのか、世界中である、接続されている基準はホログラムを表示するために使用できる唯一の座標システムを提供します。 これにより、自分のデバイスが、世界中で見つからないことを示すユーザーに伝えるためのフォールバックの UI を表示するために最適です。 アプリでは、取り付けられているスケールまたはそれ以降に示すような UI をもう一度開始するユーザーを支援する、印刷の向きのみフォールバックを含める必要があります、 [Mixed Reality ホーム](navigating-the-windows-mixed-reality-home.md)します。

## <a name="building-a-standing-scale-or-room-scale-experience"></a>永続的なスケールやルーム スケール エクスペリエンスの構築

イマーシブ ヘッドセットに取り付けられているスケールを超えるし、ビルドを**永続的な規模の経験**、使用することができます、**ステージ座標系**。

提供する、**ルーム スケール エクスペリエンス**できるようになりユーザーが事前定義された 5 m の境界内で見回りの確認できます**境界をステージング**もします。

### <a name="stage-frame-of-reference"></a>ステージの参照

最初、イマーシブ ヘッドセットを設定する場合、ユーザーが定義、**ステージ**、複合現実を表す、ルームが発生します。 ステージを最小限に抑える定義、**原点をステージング**フロアの位置と順方向の向きがデバイスを使用すると、選んだユーザーを中心と空間座標系。 このステージの座標系を Y = 0 のフロア平面でのコンテンツを配置すると、ホログラム快適ときに表示される、floor、ユーザーはスタンバイ状態を確認できますでユーザーに提供する、**継続スケール エクスペリエンス**。

### <a name="stage-bounds"></a>ステージの境界

ユーザーが定義できますまた、必要に応じて**境界をステージング**、内で移動すると、家具のオフになっている、ルーム内の領域に、複合現実です。 そのため、アプリを作成できる場合、**ルーム スケール エクスペリエンス**、これらの境界を利用してホログラムが常に配置される、ユーザーがアクセスできる場所を確認します。

ステージの基準枠では、1 つの固定 floor 相対コンテンツを配置する座標系を提供するための移植の永続的なスケールと仮想現実ヘッドセット用に開発された部屋規模のアプリケーションを最も簡単になります。 ただし、これら VR プラットフォームとでは、1 つの座標系は、5 つの測定 (16 フィート) 直径についての内容のみ安定、レバー arm の前に効果がシステムの調整、著しくシフトする中央から遠く離れたコンテンツ。 5 m を超える空間アンカーが必要です。

## <a name="building-a-world-scale-experience"></a>世界規模のエクスペリエンスの構築

HoloLens は真の場合は、**世界規模で**ユーザー 5 m を超える歩き回りできるようにします。 世界規模のアプリをビルドするには、ルーム スケール エクスペリエンスのために使用するもの以外の新しい手法を必要があります。

### <a name="why-a-single-rigid-coordinate-system-cannot-be-used-beyond-5-meters"></a>5 m を超える剛体に 1 つの座標系を使用できない理由

今日では、ゲーム、データ視覚化アプリ、または仮想現実アプリを記述するときに一般的な方法は他のすべての座標に確実にマップできる絶対ワールド座標系を 1 つを確立するためには。 その環境では、その世界では、2 つのオブジェクト間のリレーションシップを定義する安定した変換をいつでもです。 これらのオブジェクトを移動していない場合、相対変換は常に同じになります。 この種類のグローバル座標システムでは、わかっているすべてのジオメトリの事前に純粋仮想の世界をレンダリングする場合は機能します。 このような origin、床の上のルーム スケールの絶対座標システムを確立通常、今日ルーム スケール VR アプリしています。

これに対し、HoloLens など、無制限の複合現実デバイスには、世界では、ビルのフロア全体で多くのメーターが歩くよう、ユーザーの環境の時間の経過と共にそのナレッジを継続的に調整の動的なセンサーによって理解があります。 エクスペリエンスの世界規模には、単一剛体の座標システムで、すべてのホログラムを配置した場合、これらホログラムはか、または相互に世界への相対時間の経過と共にドリフトとは限りません。

たとえば、ヘッドセットは現在のところ、4 つのメートル離れたを世界中の 2 つの場所と学習は場所が 3.9 メートル離れたに実際には、理解を後で調整可能性があります。 これらホログラムが最初に配置されている場合 4 メーター剛体に 1 つの座標系に分解、うち 1 つは、常に表示されます 0.1 m 離れた場所現実の世界からです。

### <a name="spatial-anchors"></a>空間のアンカー

Windows Mixed Reality を作成することで、前のセクションで説明した問題を解決する[空間アンカー](spatial-anchors.md)ユーザーがホログラムを配置する場所の世界で重要なポイントをマークします。 空間アンカーは、システムを追跡する時間の経過と共に、世界中で重要なポイントを表します。

ように、デバイスは、実世界に関する学習し、これら空間アンカーは、各アンカーそのまま正確にこれが配置された実際の基準としたことを確認する必要に応じて、互いの位置を調整できます。 空間のアンカーをユーザーがホログラムを配置する場所に配置することと、その空間アンカーの基準としたそのホログラムを配置し、により、ホログラムが最適な安定性を維持する、ユーザーが数十メートル単位の間でローミングしても、します。

相互に関連した空間アンカーの継続的なこの調整は、空間のアンカーから coordinate systems とフレームの静止した基準には大きな違いを示します。

* ホログラムすべて静止フレームの基準には、互いに固定のリレーションシップを保持します。 ただし、ように、ユーザーには、遠隔地でについて説明します、そのフレームの座標システムは、ユーザーの横にあるホログラムが安定して表示されるようにする、世界中の基準としたずれた場合があります。

* ホログラム参照フレームのステージに配置では、互いに固定のリレーションシップも保持します。 静止フレームとは対照的ステージ フレーム常に固定されたまま、定義された物理的な配信元を基準にします。 ただし、その 5 m の境界を越えてステージの座標システムでレンダリングされたコンテンツのみ表示されます安定したユーザーがその境界内で待機中にします。

* ホログラム ホログラム基準としたユーザーが空間アンカーのずれが 1 つを使用して配置では、別の空間アンカーを使用して配置されます。 これにより、たとえば、左自体を調整する必要がある 1 つのアンカーと右を調整する必要があるもう 1 つのアンカー場合でも、各空間のアンカーの位置の内容を理解を向上させるために Windows ができます。

常に、ユーザーの近くの安定性の最適化、静止フレームの参照とは異なり、ステージの参照と空間アンカー元の場所の近くの安定性を確認します。 場所に正確に常に時間の経過と共にそれらホログラムながら、座標系の原点から離れすぎてレンダリング ホログラムがますます重大レバー arm 効果発生することも意味します。 これは位置と向きのステージまたはアンカーに若干の調整を拡大するアンカーからの距離に比例です。 

適切な経験則をレンダリングする離れた空間アンカーの座標系に基づくものが、その元の約 3 メートル単位であることを確認することです。 近くにあるステージ配信元の離れた場所にあるコンテンツの表示は [ok] を増加位置指定エラーが多く、ユーザーのビューでは移動されませんのみ小規模のホログラムに影響を与えます。

### <a name="spatial-anchor-persistence"></a>空間アンカーの永続化

空間アンカーは、アプリの中断またはデバイスをシャット ダウン後も、重要な場所を記憶するアプリもできます。

アプリを作成する空間のアンカーをディスクに保存して読み込みますバックアップ後でもう一度保存することで、アプリのに**空間アンカー ストア**します。 保存やアンカーを読み込みときに、後で、アンカーを識別するために、アプリにわかりやすい文字列キーを指定します。 このキーは、アンカーのファイル名と考えます。 その他のデータをそのアンカーに関連付ける場合など、ユーザーがその場所に配置する 3D モデル、アプリのローカル ストレージに保存して、選択したキーに関連付けること。

ストアに永続化するアンカーは、によってユーザーは、個別ホログラムを配置または、期待どおりに、アプリの多くの用途をワークスペースとなるアプリは、さまざまなホログラム、置きしそれらホログラムを後で、検索を配置します。

使用することも<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間アンカー</a> HoloLens、iOS および Android デバイスの間で非同期ホログラム永続化します。  持続性のあるクラウド空間アンカーを共有することで複数のデバイスはこれらのデバイスがまとめてと同時に存在しない場合でも、時間の経過と共に同じ永続化されたホログラムを確認できます。

### <a name="spatial-anchor-sharing"></a>空間アンカーの共有

アプリがリアルタイムで空間アンカーを共有できますもその他のデバイスでは、ため、リアルタイムのエクスペリエンスを共有します。

使用して<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間アンカー</a>アプリは、複数の HoloLens、iOS および Android デバイスの間で空間アンカーを共有できます。 同じ空間アンカーを使用してホログラムをレンダリングする各デバイスで、すべてのユーザーは現実の世界と同じ場所に表示されるホログラムに表示されます。

## <a name="avoid-head-locked-content"></a>ヘッド-ロックされているコンテンツを避ける

(など、HUD) 表示内の固定位置に留まりますヘッド ロックされているコンテンツのレンダリングを強くお勧めしません。 一般に、ヘッド ロックされているコンテンツがユーザーの満足にされ、自分の世界の一部であると感じるはありません。

Head ロックされているコンテンツは必要があります通常、ユーザーに接続されているまたは自体世界に配置されているホログラムに置き換えられます。 たとえば、[カーソル](cursors.md)通常にプッシュ、世界中に位置と、ユーザーの視線の先の下にあるオブジェクトの距離を反映するために必然的にスケーリングします。

## <a name="handling-tracking-errors"></a>追跡エラーの処理

濃い廊下など一部の環境では、内部の追跡を使用して、自体が正しく、世界中で検索するヘッドセットの考えられるいないられます。 表示するかは正しく処理されない場合は、不適切な場所に表示するホログラムがある可能性があります。 これは、発生することができます、条件、ユーザーのエクスペリエンスに対するその影響について説明し、最適なヒントがこのような状況を処理します。

### <a name="headset-cannot-track-due-to-insufficient-sensor-data"></a>不足しているセンサー データによりヘッドセットを追跡できません。

場合によっては、ヘッドセットのセンサーでは、ヘッドセットは、場所を把握することはできません。 これは、室が、濃い場合髪の毛または手が対象に、センサー、または、環境には、十分なテクスチャはない場合に発生することができます。

このような場合は、ヘッドセットは世界ロック ホログラムを表示するために十分な精度での位置を追跡することできません。 デバイスを基準とした空間アンカー、静止フレームまたはステージのフレームは、場所を把握することはできませんが、まだアタッチされたフレームの参照で本文がロックされているコンテンツをレンダリングすることができます。

アプリは、センサーを発見し、詳細のライトの有効化など、いくつかのヒントを説明するフォールバック一部本文ロックされているコンテンツのレンダリングに戻り、追跡位置を取得する方法をユーザーに通知する必要があります。

### <a name="headset-tracks-incorrectly-due-to-dynamic-changes-in-the-environment"></a>環境の動的な変更が正しくないため、ヘッドセット トラック

場合によっては、デバイスを追跡できません正しく多数の多くの人が部屋に歩き回るなど、環境での動的変更がある場合。 ここで、ホログラムはユーザーが、デバイスがこの動的な環境自体の追跡を試みるとのずれか、移動先かもしれません。 このシナリオが発生した場合、小さい動的な環境でデバイスを使用することをお勧めします。

### <a name="headset-tracks-incorrectly-because-the-environment-has-changed-significantly-over-time"></a>ヘッドセットは追跡しない正しく時間の経過と共に、環境が大幅に変更されたため、

場合によっては、ときに使用を開始するヘッドセットは多くの変更が行われている環境で (家具などの重要な移動など壁掛など)、いくつかホログラムを元の場所から移動した表示可能性があります可能性が。 以前ホログラム可能性がありますもがやや大きく変化ように、ユーザーがこの新しい領域に移動します。 これは、スペースのシステムの知識を持っていない部屋の機能を調整するときに、環境を再マップを試みるためです。 このシナリオでは、再配置ホログラムが期待される位置が表示されない場合、世界中で固定されているユーザーに促すことをお勧めします。

### <a name="headset-tracks-incorrectly-due-to-identical-spaces-in-an-environment"></a>環境で同じスペースにより正しくヘッドセット トラック

場合によっては、ホーム ネットワークまたはその他の領域は、2 つの等しい領域があります。 たとえば、2 つの同一の会議室、同一の 2 つには、領域、デバイスのビューのフィールドに対応する 2 つの大規模な同一のポスターがコーナーです。 、このようなシナリオで、デバイスが、同一の部分の間で混乱し、内部表現で同じものとしてマークして、可能性があります。 一部の領域に表示される他の場所から、ホログラムがあります。 デバイスは、環境の内部表現が破損しているために、多くの場合、追跡が失われる開始可能性があります。 この場合、システムの環境について理解をリセットすることをお勧めします。 マップをリセットする空間アンカーに配置されたすべての損失につながりますに注意してください。 これにより、環境の一意の領域で追跡するためにヘッドセット。 ただし、問題が、もう一度同じ領域の間で混乱して、デバイスの場合に再発生します。

## <a name="see-also"></a>関連項目
* [GDC 2017 プレゼンテーション空間座標系と holographic のレンダリング](https://channel9.msdn.com/events/GDC/GDC-2017/GDC2017-008)
* [Unity の座標系](coordinate-systems-in-unity.md)
* [DirectX の座標系](coordinate-systems-in-directx.md)
* [空間アンカー](spatial-anchors.md)
* [複合現実での共有エクスペリエンス](shared-experiences-in-mixed-reality.md)
* <a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a>
* [導入事例 - 実際には、セキュリティ ホールを見る](case-study-looking-through-holes-in-your-reality.md)
